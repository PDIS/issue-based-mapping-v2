webpackJsonp([1],{"+zoX":function(t,e){},"0HRO":function(t,e){},"4dCV":function(t,e){t.exports={IssueList:"所有議題列表",Search:"搜尋議題",Enter:"進入議題","Issue Mapping Instruction":"PDIS數位版議題分析表","Name of Topic":"提案名稱","New Topic":"新增議題","Original Name of Topic":"Join平台原始提案名稱",Initiator:"專案負責人","Kick-off Date":"提案日期","Responsible Bodies":"負責單位","Mind Mapping":"心智圖",Instruction:"說明文件",FAQ:"常見問題",Home:"回到首頁"}},"4goK":function(t,e){},"7zck":function(t,e){},HVVf:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAAHaX54IAAAAAXNSR0IArs4c6QAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAC4jAAAuIwF4pT92AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAAf0ElEQVR4Ae2dC/B9VVXH5Y0IqGkIKCAg+EwHkDQRxwQ1tMbUsVGcnBDJTMvKMk2nzCHNx6gY6lgapTZN1qgzPvKBipKooYgaCiKIiigPERDkzb/PZ//OOv99zz3n3nPv78EfWGtm3f1aez2+e+9z9jnn3nvudKekRCARuAMisGmSbqghmGzadFm0Ub+VbVX5oEp2m6jfOjJN+jDSh8BHNcK/19SbWC+/qmnb1kroZj+o+ybJ9ltBpOq9kbrWEOUiZN+2kvy28I3RVoSaD+qPgL8PG8lNfTK1fDeSum1W/hc0/rwWMAIMXgdLRvGgur3kbYlKsjtYhg63zkzVdphlyEjrSAK+IlokNm06KvrVlU3bZqU2tpVNJjpS1EhxgOQWePtoa/q9y9RBKtQIb0vUZSCjfpEUHc5Kx1W9ItjqX0RPyiYCiUAikAgkAncABDhtbuPpt6KPR9jU7VHVmz22aqs3GFtXcr8fMm1Ko0bcxjy44W+QxgZBI5+FbfsVWCo7TDOhxDzUbrHI3xJtJaWiGKkrqYuNnUY+3GkLByaM1DJ1vrVcVzZ5tzujdxvuTHQMLlTrq43UXrmv3cZ+jXC7TVIDdWVrGoqoKs4gv53GpEYuRMrmrTvwl0YrwnvaoaI3VG3hxMQu03blQ66klKfGZEJgRAEdb1AxVCAb0SVFEoFEIBFIBBKBRCARSAQSgdsYAux2R11UTFx10Mn7nxMXA0Nxe1EQbfTbg/xFUR5Ib6RLeyNXB5HzGuxm6ts7ydSbL5ddA3puQH6Hblt95VO3GYw3hqeI+gMUxKDU7f+RqQ5UqAvebqXLpoPtP4MMwiut9iqq1kn91ehpr8RCT9eRqJ+Vnt803oKByavagV7IiXqM4OkDYqW6kVNvXHO+x4YAjfZ7wO0TkdKJj2UC2bXp7P2AcC709abIlcvQpnGvXqGqEkfj+Y6j8hz6v5Lmm0lvgoOGbSPRve6NTlNpZVe0ujdDpuSp6D4ZKxfe1LdrkvzusCPxtFp/N0+7D06u7ta3ZRojEJVNDV8ruI4Z7J4HB+2jKQoFfdJDYUfl+q4Lw8PTldzgMs56m8Xp9FRMHwifQvnLlEna2y8b7FWaSwQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFYCwS81ztGz8TzETodDA/RxTQcDU8oplx/b7Lb17v6n+5zhPrtG+FzB9q/YjttPkKQ5j3a26wG4fpXOqV3z8fELX3aZwXS7d6CQEMEcvZmD8ojhMNo03lBqCnK19XykZ8YkagkPQmOXw6Z+gujl8CSDqi0fYC5Ul0eoj6UfN3v1yl/GY4vOb6mka2TaIu6z5Ex4PLUymcIEuU7NwL+bOeRTb4/QSBG5PV9ErTHA02ym+6pDGmMiMH1AkP9jnBQeYBEIUbk27WtRui5dV2dp708fqvrzPca7gpFGWB84voHTfmDUT8itV+Z7+joPpEV7S69G4e7I15k6F+eNnc7LBRI0/l9TbpPV9lQuXFeh/uc7k6teKZ4bTM6B6mX/MxHgcsE8vTG4TOadG5SOTH3cTZBb4fCw2BHRPkz6G/qlPoRaS8tFAiKVP6vjaaZT15ra9V08mHrXJvIn0b/rUkdhd3hyxp9fqM6RqypWkmGlHbnsUP7eLo41yWnw1RfDE8gTh8PDl+Eo/7YrkzR1nwg548Ei17kypQjvRjeDRFBtM2Diw9JLfcTjXHUIjtI3eflcdQa7FA1tGuEuomjFuXQ408oB51sdAUwbSBTqLYt/ZlXg872nabWuU59FK8iE99r6S5sZe7qB3p1zpOtX5jZG54igghbjsjw4qcxRqT3PDKleR0q8OEGWDqvq36lunye0m0bHMKu4EaVHXFdxd6+TRrr1RFwoX8SmSd3/Ymh6tZvEWUCuR+OPBG+Bn4fAfQesbYIZ9OJRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgdstAnyv1f9h25AvEYct0/UGFBtTX/emzp9TTBB1S8U++D14DcPxdXKyhfzB1hj2m9J+8T/eb/SxCW87BXT6ZX7/NE8K/UP5aI+0tYVa676ietLewbEejh8TkC0/a5r4KVTHPXX5i4ldFabN36yUn0JZhsr3901LaeVDnyL2t3T1zSoPDshAJ4McwzqpXMwmX73l78auHNBrdQAY+qOuWx/tkQqS+bB1CHYERB/GUtiYkEdP1PsTmdp3f7S3G99ml/xtTrDyrgx/D6E/+vZi9PgbhQvIz6VFBsSv0r8R9pccGh1il++dcdL2AIlskd8Fx3RyHmnrI7C/ShmyE/U7IlP+4ZRUUn+Ja6St0qnvgxhUEf46yF9SN/WHwe3rJuq+1PvHpi+nztjjV5JisheqflTL9uUXGRD765wGZ/FNtJffQZD6D63OmsvhWDUu91fAAjqPZtmJNu0V0BpbZ6FU8CRt/RtcT4yVlsnPAH2ydrKkzLfgebpKL3wxXv14K/xz+BJ4+d+HGARcn0M85Lx+RHDY3UyNnv1Ig/wd1Pc3S5TjveeQ+g9ctfVheKEJg3z3/OBxfQKEHhkH7ezan8hT77njr+H4WRTZQm+uZMRp1CBFn1npQgHPUjSnrT6eO9MmfjE+p++izfVsN3/dCAV1n1acWe7qix/0xeFG2T9pBsa41F+f5D9G26NDyaKDte4DQkAu21PgelCOx9Exh6yIa5H0ZIRjVWj7hLWwRRz3QZe/mvQc4mH4z2DPIxGHNo3xKPhUbErad7DKhoB0ebzpPHTIchl7aJjFxUlk6l/dU1zZ0uLkBFE/dMjSh1l2bGsPF+Slevs5NfNpt09329t7yJpwckYBffofA+M2+UHwl2Ap/CnpDDWlyZHuJRQZqP/TMPq36ZUiZ4pgtGCRdwZdyuTak3SCsOXMuRd80UTD+IK6W0DIaz9m8oQWbBmzu544bDqLz8WvB4ZgI7ML5WPg/eEDYX+r/wvkpgaZ+l5Cjz4ZW23ra+g4tLcDlXUQQzLL1OuEoARQn8WJxy2jaGQf7YWtb2LroQ2oI7u310BFvgH9KnTERZ2xnEP9fcYqVA55fXLFlMQqeGpC2jiXUNI9ZLnTOH5ux0oA+fUa8MrKSrbxd3DFT3WYU6Hv8KPgOOSQLRR/l+EkGCQkS+ykV8D1Sd//VRj0cxHAVOKxt/zz/KAnVUPMkKpq3bLY8tCzZtT4fhoKPT94UvYiz0Odf/uhLScsyZ38iwRvvVwL3wX20Lcz7MpQQNy8jXQ9Om2fSTNHmZ71OcDB8yp9cHRnWroNNwKk/zuxE6mxvw2ucRH8h8OHwwfDZTBIpVNhyzuOGQw73OHANei1IhaAE7o7qV0V3qEoy2etbKWeRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBG4vSKQfxO7ipHlb2In8FvXv4btGlvUb/r7V931Hw4vqmK0vHY20NbEv4Fj17ctTPx3r+Vu3dhgJhTVnRztJelq+vnaoTfAe6uT8tyBQebaJexdQx9fNfEO+IAFbH2zY2sHyhOzXV010R5Y+e6TeANb+dNk5HxrUEuUPwD7tgdjj34WV0co05B/Rh9MtqWo60v983lfWxR0PzITM6vrGe2+jSACq3WqY1a5a+vRyM8EgfYz4foP8scMyEn0kYxLf4LCtyibRuza2An2P+NH0UzHKw3Onu4Mirq+1BURA+AsOhc+GseijuIU1fprnQrOKte2lD0VfhW2an3WL03ouobORzcKjMHXVwSFb1E2DVxts+8Rc2K3z3xCSawQsqPJPt1ZFJ33J9N7+KL+53CskJCfl86ydSSdeycA9aNXCLKfh6+HpVhVMThTICLju0suh7ux3J26GKipflExcxapFMF6BnhO2DU6d1JXwt3ge8NPhI+F4yUrZFeIc1OvTWz5armd4HB6v6a80nHyU1u+sWAP+Aj4BbCzdmKwZ9g6E9mHVPK+C/EGz5ukhfBHPx1QXzUhqf8aZHalzXdRlZe1lJbqg7byOg/Sv6T6NbDxqFd3emOnbRyh1FFuj5f20uAcdndVZibp++E4npIt+p5COjVzqZtYIUvY8pV+9az0BTSvGLA1d4XYD34ZrJ5CjU+jQaXTt+BYVeq4GxwTTnWLEZ2nBmQxDWUA3QkFUKY/7tNB/dSA9MnNqkPHeXAAUCZSnzwyYwbEretH4XZC9ekaqqOf/eP9vsbtYe+P4KnJWOtYfrRqLQN5jKt/fzjsmO4+IL6qamw5c+8Px2Fr9EyeYThe5jVDpL+Jo5PvEPlJ0+pbeH4I3wNuD4tN2/iEIB3ZiUPW+N6bJdExQbZQMQEY5VWvkEavtlqfyXvMjwlRnKI8ZoV4yHoGHCvOlfKhxkYMetE39IH8RIxDcnX9hKN1wxrn3fq1W0UcvTvlhZ0d6dM5tS3yey5ji9ntWz7/k74Bvoea38R3Nx8PhgtRduB6Y6H/wqthowbEl2ot7FwT86KJ70KsbfWCNUapYCN3SCXr4LgT/DptkncJjoHb905R5wAtjevSHXFiEXKrXAPjVrIGbRFd82TdCte2rpvXYajdVULbN+DHNDKWa8zuR/ntsHcZJDcsL4XdRpcdqemaEQbW7RzSdRJb63UOcZteD5BAzT2H1P4hX3ZGpP8BB3lOqc9V1otXuysjf4J6SEv/WudQvh7tIZml63HEO5Ttcl5a0YiO2qrE2jyz3Peur2o1NitF9c8ir+6Hwp+Aw47nR1eP5Rr8P8QvbR8Dr57QteoVgo7vN3pIyo7Fq+Qpom3VKwQd3uaIGarvV0wZooL6hVZIVwf9XXXtZCZ/JHwyHBQ+1OV/7+pZuIy2qQGhzlk/i70giiX+QfJd57zXEzuX1ifqpgaEull2bKttvZmy/ga5Xf0duJ6xxR51qxqQ1ukm07VB+aWwVMeub0+Cp/zp6hss03lqQAaFNzu3N/2Oh6XaoXK8HeqP7NSADMlGPX32hF8OS7WtUhFy3ZTGuQOCjLsleWrydPXVZeSdKDEhTyQfk2Rm/KFjkdFC98rLX6PzjPRG2jx21vo9vt4LFb5Wu70mGdCxiC2P3V1bqj0UJYM3AQfs1tXPorA/vC96dsDnZ9aNQ3nk9EWfvJv4Ivr+Btn7wmVgKYuDbcotRnSeWCGUl6HYiRxL53qAJpyhbWKFLGOo6vNa8u0xfsIQBdrGrJAfI+eNxXJzsatjTJm+nmseAwcGZDftAw/6NgjQGIMzZBx9b92r3xnxIPg7zArr1pq05YozSG0dCX9mqRlIR6kB7AtknwIXjKjzhffefp+3uhGbII8WZVU0td61WI5wol4h9SjTNJdOQeJQLZPOPQ7P1TZb4H9pflxja+4kQ/b8jjof4bazlrwz+/6VjDj07thmIUsfNx2fgNvz2yz5uW0oqgdk4WMe/ecORANiPYPm+tUnMNZWX9+hOnRKMREF9XvKks58ST3tntgd1EPgIHd9Zw3ZGlWPglUNyCgjW6gQsTu7fexaU8z0v5jnNp3eX3c0bx+SmZNvZiOdJx7hcvycKT/PydtaO/H7bZGHwafDAhrxu4uKQ6Nf4Li4afM+2n6wVMtYfgR8BhCWHZgVfRQG+toczTv0gAgKGATwnpwlMYlDsYPkSb7MflLPQ3Eusk5Z+98bvmTeYCDTdjbfRyqfOWh9nW5PdQ2IPv0TBzcpF1bx1djUeUUcqOc3/S5u9FRd+7NdJf1SWVsQYLWUb5RYIH9nEp+VHAjvBvvM50fw1wD/h6RldY0dCOWlHJAVHBb+ZEDEru8I4mpa9FplYfvZIRFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEEoFEIBFIBBKBRCARSAQSgUQgEUgEtjQEtlrWoU2bNtl3m2X7j+y3qZFr06222iryI1UsLkZsxrU0NiMsRgxtusFxaTfii/wmfLh5hO9LiTTzZevK7i3Yu2VIGfIhq5/6qH+D8kN6Vlu/7aIKDBTS4Z3hhy/afwF5gbkevga+Gr6iSa8jbakBUjBvbvxq2xbJRFyk29PvkbDYOCAxkciuCanvRtiYfgH/rMqT3Uz4og+riiu0GR/5g+Fd1QlHXI6ldn6OzOlrNQkb37uL4EDsPAx+ILwfMruR3hXeEd4FvhYWE7H5KXwhfA78rYYvIy1E33Jwxt91W9Rha6E0HCM9CL4ZlkxvWQdW9yy6hsYPwkdFEOQd7IWJfi6yO5HuDl8FSzfBt0ZcN2D38/CzIxDyy8ZVFgL9t4fPhKUb4YjLvPRteIcGg1g8YX5USv/WR/KPhT8Cd0lMtRlsucvRFqm+1vQzCu+AHxCOkW9tR91apGVSrIEiAV0PnueaR54nwzEQVzZlJ/qy27+IQ9uRX+tU3bPIwf41+F+IoxD5F0QHKvRnNdSNZzW6xDom5wPIn6PDKPwM/ATYfE217+adg45VzfW8rOVDj2fBY2EXtXQWec9KtS8WV00R2KoV9SjoAtMj0lYpWwPRLddtbScyAlmDuRPlDwGYMk9t8ttxGnZLs5Y0tPXq+j3GZl9s1tVjo723ENdbSf+KeF5Lfptbe3tR+bAP+TPwzYl7AywZw3awvstxwLqUvLJnwt+FLV8Fi53sFvce8L3hB8OHwA+BAw/H0ry6gw4g8w18sOyB5UvktwWfm6zYUMJwCZS03mJ1T4E0l21XnCKXSWP7pq4uac/T8hC5RZE+HeCQ75uI0eyRpyw00j1g9+NSnw/aXiae6DPLb20qN0TRdh4Cd9F50voA0cYTGdpL3KT1Fqv2IfILbbHQVyYs6XGwFL6tlDaPz7VUPDf8MaW8NbxtxduQD56o7/RzbE6Cg7rjc33T8M9hp+6/IXkcmLdAYnL+3Xo4hH0BfAJ8BizFAK+UNn/GgJ1FVUz+wUVSyQwtkND3wfWIS534cAj8cVhy8IcOPLZfCe/V9BtcJMis+QJBZ8yBw8lL+ln7GhP3dxv/dqB9EHtlxhA6XEQxlieQl2JcVkqbNsX8e7c6qYwz1xgTq5cJg6RDZ5Bw+PXr4SB2t4I9DRci78WsFHZXSiufUfd+hakaBIu2AH7eAvlwo2twUhbHlvjAh9hG6Os/wVLEsFJa+YyDwv9RjMnaOwFpH7tAzkZ21EV6ZfO95KXax8j/TYNTG9MSkPR2wV7ZXpEeo3Eo8DBfL9YjVuvDmg9yb0RrWMm+0vvMZZ8LGF5fPAb1r4IdiO6e08njxvQZyD4RWY9saz5g6F8Twr/ifxPXcSh9Dqy/N3cMGJey7tFf1LStNq6ygW90zUtC1muFLsVC9TbtuhA4uQhJtjoJA5+CY5y1p/3w4elWQFFeKS3weZtbIHVsDVBerP4t9Z4luotEYGJyldM9ZS8Yt2hq4vIi87046lY1FkTtdwz6s61s+kRdLbce+Zg3Pp+QYsGYDx9ezSTeA788urdnfAXWmJ6HPi/MPVjcF/5l2Osz58IL4YKN6TIUgS7Td0vrc0LjkMD0DZj7+x0ZME/BMYhbWgy1P7GQ306lR2PjijrlIob7E8/eVkBRt1Ja7HORvuGHi/dH8HZw1MWc8o7WRfj2UdLd4UJiD3sd6fXEIjZDRUkZxxjjC6k4Hf4O/EP4ctgHjj6kDBmKy1EEs1zvLaNXgCBA8aQ16vQwBsGjyp2tgKJupbRlfpYYGOSLcO/8xsW+uHamzdikDYkrDjKkfgvgQPhs2LnkLdggz3rSE+Dvsxgk2z8DvwT2ibqLfoKQiTtc7QX5hECnoC+w3zaQy5N7UvdfNVadXuOLt4cFEtGOAWRDJlA4dBtLx+DXhlRNwBvI+5DuSbBnEslrxNBXLwIXzaPh4+GvwnHHycXj9aEHgv+C/xQ+HP4leIKQceF4BtqQuVs7P+HIbagQk35/fL5n43fUWfTUL5gXM5CefqUYvJXSlvlpDMyDTfcivW/jYh2XMVi+BL60aV9NXLXuRt38BEzjxsinyLt9uhu93gQfU/X2zKF+F8jQnLN9b3gv+LdgZdVH0tIF5E6FPwZ/Ei7jiYyyXmvE9abFNaENWYVr4umwkhjY5zYiMRjdHp+zQjAdx27jFliOsTka37zwdCJGne668KWvEs9lxLU1adSttCz2uSpMsB0Lxafix1EuRN7vS70aPgPu2rBsP9l8LCAXUYwr2UK2u3ieCb8P/ikxS9eTPxEu1zmU3aLVONG0PK2ZouVdWL4nQGzPKHiX5Fi0PB/2CBKneRULqmB7yj8Jvk0Q8Xj72rgeg8MejWPy1P7H2L2rqYxyLbPhefwu1wSV4e+S/3vqHwF7cCpE3W7wUfBr4FPguH4k25Jxe8CLM4MLyPEtZwxSybLjfyF4Kf82DJQDBcWNxwSjxTnSLeVB4UfxRYoHVCullc+oOx7gPHu4WHqJtgIm6a3yoBC7bifaxU3+jbBUPwRbqdkc64cMhsrBiUBbORKTrulXTXpBXKBSn2GvJeTu2cKY7gE/Hn4d/GU4vkZCtlyv9OHiHcq4rnnLPGwWcHe8KA4sukAKAPRzAozmIY8aHU8j9cmvFItgpbT5M4DyNqOATw1CbYP2RRdIuU2p3kW4ttnNo8evbvwPLHnRWn99o1TyERPD7075beaZsSGzRS6Qbux1WZ/hdgHVbeZpOwr+Oiz14RRzwtu/hZCbOf4h100Hj6hdwQXKcfpzEh9Av+1hT32LkIHbzws+72R4Ot4VDvIUGjr7YnBLZf/3crp9DrpWuz/XbsR1KPo8cvfZVW4WGZf9/JHQ3WHj6t6pcT8u9Z0V3G54lvkicT1KIfS5ZQksrFo32ihbTTzGNHVNpQ/Un4yMt4mN3+uPF8LiFmNiavnhtL8TWbff4hlbNbLjKBSOkx4nFSt1X8T3GddlUCp0RRqCfZPHtgDJxXEkwHwagNbqa8/hg5P6yRpbBYUuUydClFXZNyZxQHBx/DFx/UPERX6jFofXDx6tD8SHc3R0gA5A7rvIrcVBacpEE68HCheH12ovIv0BxdfBMf42xxx5Mu33RG6pGxmhRIVrTep2sFfDHrXlIT+dHIISRwbTZwOGE+4U2Ft/tq8lqXs1Mdm3jqteHOGncRlL+G78r2ziOpEBNxtt0We90ziaX4ChsxpjgbvF8OfFTdvQmDXNa5KETyejzbzYxgEjcHUX4sPUpUiF60U6LIDh6LJ2ImABj21OretUCicyYT5gJZOnxES5Hrxafl4+Fp1yDvoY/8fIdO3WcRlbrcP8N+G3w+8mFq9FyjUP+ehH08IUmBhX6LFOXKOtV6l2xZbUa7t3IvRWOHTYR9zV6xH9fOTeTOpdRre760Xipt8Hwea1H3Pa+WdcPuX/ASzV/q7UzPkMZXPEFmrWMZ39NvxF2K9QL+wYfZwk3uO+AvZB2A/h78GC78OxQgyCcu3koU2QlqHw8Rd0/kfYr6Woq564FHtpF2rd1oWOXqGmUn3q/Rl8OXwhfB58Ab6bb4nYHJ+ik7aZE7jtNJxxXP4bPhf2u0qOkWS9sV4Az7Qhtvjk1skt3uOQ/204rovIlsmpjjfRfhypMj8hLzY30U9ba0Lo3AF93tl6KgrfBYuTCyIoxu147SK3Vlvt0N+fYqg4QTrvNu8b1ICctxedwMuyd8G2g03V4d2NCL7fyVXWNra0N5aXie3WiEvshnyNBTMXPXQUWdL3wFJ9C3alZvPt1uuoeBnsIixE3tNRYFvGs6kr4xr5JrW9yEZ/U+r8CUP95xoUW4o7mM9rZD3QbAzhwtgF8no9CvmN8S6tbBQCjGuZdKQPhv2XEalvoXhhH7ddlbka/jj85/Bj4b3hneGJgx5lF8Yu8L7wkfAr4NPgIM8K6q4pFsYlVO4tFqT1WWX94QmDpPPOILlA1n84bnULzINYKH7tPp5NkC0P7JzEXYoF46Lpa+/KW1ZO+b4+bvusly6GHy4opN7xWzWNPq0OWHK/Gey+2ryptGb7zRV1+bklIsD+Psb7PPIPgz0T/Cr8Mbg+K3iNoKzzwnk3du7ZTw5dzrGafkDhedqF/GLnmTaSL7eCza+Gltmb6ax0NfwF2ECjziAEwVtrF8BJdxAEmJCxUIz4DPip1JV5wdH8LpQPhR8LPwK+H+yXC8fcfnVOXQlfCHtn7zT4s+iOW82eLdp53PED0dVRrMrVacneicAMBJjAHkRlqfyoaSW72Cd6vJ5wzrrw1BMH5sUUpXQikAgkAolAIpAIJAKJQCKQCCQCiUAikAgkAolAIpAIJAKJQCKQCCQCiUAikAgkAolAIpAIJAKJQCKQCCQCiUAikAgkAolAIpAIJAKJQCKQCCQCiUAikAgkAolAIpAIJAKJQCKQCCQCiUAikAgkAolAIpAIJAKJQCKQCCQCiUAikAgkAolAIpAIJAKJQCKQCCQCiUAikAgkAolAIpAIJAKJQCKQCCQCiUAikAgkAolAIrClI/D/SADmzsECMaUAAAAASUVORK5CYII="},NHSw:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),r=a("Dd8w"),i=a.n(r),n=a("NYxO"),o=a("ye7G"),c=Object(o.a)({getterType:"getBoardField",mutationType:"updateBoardField"}).mapFields,d={data:function(){return{clipped:!1,drawer:!1,fixed:!1,miniVariant:!1,title:this.$t("Issue Mapping Instruction"),search:"",lang:"zh-TW"}},methods:{setlang:function(t){s.default.i18n.set(t)}},created:function(){this.$store.dispatch("getuser"),void 0!=this.$route.params.id&&this.$store.dispatch("getboardinfo",this.$route.params.id)},watch:{$route:function(){void 0!=this.$route.params.id&&this.$store.dispatch("getboardinfo",this.$route.params.id)}},computed:i()({},Object(n.c)({user:"user"}),c({board:"board"}))},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-navigation-drawer",{staticClass:"cyan darken-4 d-inline-block pa-5",attrs:{"disable-resize-watcher":"",fixed:"",app:"",dark:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[s("img",{staticStyle:{width:"190px","margin-top":"-50px","margin-bottom":"-30px"},attrs:{src:a("HVVf"),alt:""}}),t._v(" "),s("v-divider"),t._v(" "),s("v-list",{attrs:{color:"grey lighten-4"}},[s("v-list-tile",{attrs:{to:"/","active-class":""}},[s("v-list-tile-action",[s("v-icon",{attrs:{medium:""}},[t._v("home")])],1),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[t._v(t._s(t.$t("Home")))])],1)],1),t._v(" "),s("v-list-tile",[s("v-list-tile-action",[s("v-icon",[t._v("work")])],1),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[t._v(t._s(t.$t("Instruction")))])],1)],1)],1),t._v(" "),s("v-divider"),t._v(" "),void 0!=this.$route.params.id?s("v-list",[s("v-list-tile",[s("v-list-tile-action",[s("v-icon",[t._v("announcement")])],1),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",{domProps:{innerHTML:t._s(t.board.desc.title)}})],1)],1),t._v(" "),s("v-list-tile",[s("v-list-tile-action",[s("v-icon",[t._v("face")])],1),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",{domProps:{innerHTML:t._s(t.board.desc.person)}})],1)],1),t._v(" "),s("v-list-tile",[s("v-list-tile-action",[s("v-icon",[t._v("event")])],1),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",{domProps:{innerHTML:t._s(t.board.desc.date)}})],1)],1),t._v(" "),s("v-list-tile",[s("v-list-tile-action",[s("v-icon",[t._v("supervised_user_circle")])],1),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",{domProps:{innerHTML:t._s(t.board.desc.department)}})],1)],1)],1):t._e()],1),t._v(" "),s("v-toolbar",{attrs:{app:"","clipped-left":t.clipped,prominent:"","scroll-off-screen":"",tabs:"",flat:"",light:"",color:"#2A396D",dark:""}},[s("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),s("v-toolbar-title",[t._v(t._s(t.$t("Issue Mapping Instruction")))]),t._v(" "),s("v-spacer"),t._v(" "),s("strong",{staticClass:"mr-3 title"},[t._v("Hi, "+t._s(t.user.name))]),t._v(" "),""!=t.user.avatar?s("v-btn",{staticClass:"mr-3 mb-3",attrs:{icon:"",outline:"",small:"",fab:"",btn:"",disabled:""}},[s("v-avatar",[s("img",{attrs:{src:t.user.avatar,alt:"username"}})])],1):t._e()],1)],1)},staticRenderFns:[]};var u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-footer",{attrs:{fixed:!1,app:""}},[e("span",[this._v("© 2018")])])},staticRenderFns:[]};var v={data:function(){return{}},name:"App",components:{vueheader:a("VU/8")(d,l,!1,function(t){a("uDZ2")},null,null).exports,vuefooter:a("VU/8")({},u,!1,function(t){a("ywch")},null,null).exports}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",{staticStyle:{"background-color":"white"}},[e("vueheader"),this._v(" "),e("v-content",[e("router-view")],1)],1)},staticRenderFns:[]};var f=a("VU/8")(v,m,!1,function(t){a("NHSw")},null,null).exports,p=a("/ocq"),h=a("mvHQ"),b=a.n(h),g={data:function(){return{close:{state:!1,color:"",text:""}}},methods:i()({},Object(n.b)(["getsnackbar"])),computed:i()({},Object(n.c)({snackbar:"snackbar"}))},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-snackbar",{attrs:{top:"",color:t.snackbar.color},model:{value:t.snackbar.state,callback:function(e){t.$set(t.snackbar,"state",e)},expression:"snackbar.state"}},[a("span",[t._v(t._s(t.snackbar.text)+"成功!")]),t._v(" "),a("v-btn",{attrs:{flat:""},nativeOn:{click:function(e){return t.getsnackbar(t.close)}}},[t._v("關閉")])],1)},staticRenderFns:[]};var y=a("VU/8")(g,x,!1,function(t){a("kwB8")},null,null).exports,k=Object(o.a)({getterType:"getBoardField",mutationType:"updateBoardField"}).mapFields,w={components:{snackbar:y},data:function(){return{date:null,picker:!1,valid:!0,nameRules:[function(t){return!!t||"此欄位為必填!"},function(t){return t.length<=20||"此欄位不可超過20個字!"}],requiredRules:[function(t){return!!t||"此欄位為必填!"}]}},methods:i()({},Object(n.b)(["editboard","getsnackbar"]),{submit:function(){var t=this;this.$refs.form.validate()&&("dep"==this.board.desc.issuesource&&(this.board.desc.title="部會自提"),""!=this.selectedboardid?Trello.put("boards/"+this.board.id,{name:this.board.name},function(e){Trello.put("boards/"+e.id,{desc:b()(t.board.desc)},function(){t.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"修改"}),t.$store.dispatch("editboard",""),t.$store.dispatch("getboards")})}):Trello.post("boards",{name:this.board.name,idOrganization:"5ad56d6d96cb269a7a2aaa0a",idBoardSource:"5c19e75bc6ac7935093c0ae6",prefs_permissionLevel:"public"},function(e){Trello.put("boards/"+e.id,{desc:b()(t.board.desc)},function(e){t.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"新增"}),t.$router.push("board/"+e.id)})}))},resetForm:function(){this.$refs.form.reset(),this.board.desc.issuesource="dep"},getstatus:function(){var t=this;""!=this.selectedboardid&&(this.board.id=this.selectedboardid,Trello.boards.get(this.board.id,function(e){t.board.name=e.name,t.board.desc=JSON.parse(e.desc)}))}}),computed:i()({},k({openboard:"openboard",selectedboardid:"selectedboardid",board:"board"}),{formIsValid:function(){return this.board.name&&this.board.desc.title&&this.board.desc.person&&this.board.desc.date&&this.board.desc.department&&this.board.desc.codepartment&&this.board.desc.issuesource}}),watch:{openboard:function(){this.getstatus()}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("snackbar"),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"50vw"},model:{value:t.openboard,callback:function(e){t.openboard=e},expression:"openboard"}},[a("v-card",[a("v-card-title",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"subheading",attrs:{flat:"",color:"grey"},on:{click:t.resetForm}},[t._v("重新填寫")])],1),t._v(" "),a("v-form",{ref:"form",staticClass:"pa-3",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.submit(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-container",[a("v-text-field",{attrs:{label:"議題名稱","prepend-icon":"assignment",counter:20,rules:t.nameRules,color:"grey-blue darken-2"},model:{value:t.board.name,callback:function(e){t.$set(t.board,"name",e)},expression:"board.name"}}),t._v(" "),a("v-radio-group",{attrs:{row:"","prepend-icon":"settings_ethernet"},model:{value:t.board.desc.issuesource,callback:function(e){t.$set(t.board.desc,"issuesource",e)},expression:"board.desc.issuesource"}},[a("div",{attrs:{slot:"label"},slot:"label"},[t._v("提案來源")]),t._v(" "),a("v-radio",{attrs:{label:"部會自提",value:"dep"}}),t._v(" "),a("v-radio",{attrs:{label:"Join平台",value:"join"}}),t._v(" "),a("v-radio",{attrs:{label:"其他",value:"other"}})],1),t._v(" "),"join"==t.board.desc.issuesource?a("v-text-field",{attrs:{label:"Join平台原始提案名稱","prepend-icon":"announcement",color:"grey-blue darken-2"},model:{value:t.board.desc.title,callback:function(e){t.$set(t.board.desc,"title",e)},expression:"board.desc.title"}}):t._e(),t._v(" "),"other"==t.board.desc.issuesource?a("v-text-field",{attrs:{label:"","prepend-icon":"announcement",color:"grey-blue darken-2"},model:{value:t.board.desc.title,callback:function(e){t.$set(t.board.desc,"title",e)},expression:"board.desc.title"}}):t._e(),t._v(" "),a("v-text-field",{attrs:{label:"專案負責人","prepend-icon":"face",rules:t.requiredRules,color:"grey-blue darken-2"},model:{value:t.board.desc.person,callback:function(e){t.$set(t.board.desc,"person",e)},expression:"board.desc.person"}}),t._v(" "),a("v-menu",{ref:"date",attrs:{lazy:"","close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","nudge-right":40,"min-width":"290px","return-value":t.date},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},model:{value:t.picker,callback:function(e){t.picker=e},expression:"picker"}},[a("v-text-field",{attrs:{slot:"activator",label:"提案日期","prepend-icon":"event",rules:t.requiredRules,readonly:"",color:"grey-blue darken-2"},slot:"activator",model:{value:t.board.desc.date,callback:function(e){t.$set(t.board.desc,"date",e)},expression:"board.desc.date"}}),t._v(" "),a("v-date-picker",{attrs:{color:"cyan darken-4",locale:"zh-tw"},on:{input:function(e){return t.$refs.date.save(t.date)}},model:{value:t.board.desc.date,callback:function(e){t.$set(t.board.desc,"date",e)},expression:"board.desc.date"}})],1),t._v(" "),a("v-text-field",{attrs:{label:"主辦部會","prepend-icon":"person",rules:t.requiredRules,color:"grey-blue darken-2"},model:{value:t.board.desc.department,callback:function(e){t.$set(t.board.desc,"department",e)},expression:"board.desc.department"}}),t._v(" "),a("v-text-field",{attrs:{label:"協辦部會","prepend-icon":"supervised_user_circle",color:"grey-blue darken-2"},model:{value:t.board.desc.codepartment,callback:function(e){t.$set(t.board.desc,"codepartment",e)},expression:"board.desc.codepartment"}}),t._v(" "),a("v-text-field",{attrs:{label:"會議筆記連結","prepend-icon":"notes",placeholder:"建議您開一份線上筆記，紀錄跟此案相關的細節",color:"grey-blue darken-2"},model:{value:t.board.desc.link,callback:function(e){t.$set(t.board.desc,"link",e)},expression:"board.desc.link"}})],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"subheading",attrs:{flat:""},on:{click:function(e){return t.editboard("")}}},[t._v("取消")]),t._v(" "),a("v-btn",{staticClass:"subheading",attrs:{flat:"",color:"cyan",type:"submit",disabled:!t.valid}},[t._v("確認")])],1)],1)],1)],1)],1)},staticRenderFns:[]},C=a("VU/8")(w,_,!1,null,null,null).exports,F=Object(o.a)({getterType:"getBoardField",mutationType:"updateBoardField"}).mapFields,A={components:{"form-board":C,snackbar:y},data:function(){return{search:"",canedit:!0,showtable:!1,headers:[{text:this.$t("Name of Topic"),align:"left",sortable:!1,value:"title"},{text:this.$t("Original Name of Topic"),value:"desc.title"},{text:this.$t("Initiator"),value:"desc.person"},{text:this.$t("Kick-off Date"),value:"desc.date"},{text:this.$t("Responsible Bodies"),value:"desc.department"},{text:"",value:""}],dialog:!1}},methods:i()({},Object(n.b)(["editboard","getsnackbar"]),{closeboard:function(t){var e=this;Trello.put("boards/"+t,{closed:!0},function(t){e.dialog=!1;e.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"刪除"}),e.$store.dispatch("getboards")})}}),created:function(){this.$store.dispatch("getmembers"),this.$store.dispatch("getboards")},computed:i()({},Object(n.c)({user:"user",members:"members"}),F({board:"board",boards:"boards",openboard:"openboard",selectedboardid:"selectedboardid"}),{filteredList:function(){var t=this;return this.boards.filter(function(e){return e.title.toLowerCase().includes(t.search.toLowerCase())})}})},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{staticClass:"mt-3 mb-0",attrs:{color:"blue-grey darken-4","prepend-icon":"search",label:t.$t("Search"),value:"Input text"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),a("v-flex",{attrs:{xs4:"","text-xs-left":"","pt-5":""}},[a("span",[t._v(t._s(t.$t("IssueList")))])]),t._v(" "),a("v-flex",{attrs:{xs4:"","text-xs-right":"","offset-xs4":"","pt-4":""}},[a("span",{staticClass:"group"},[a("v-btn",{attrs:{outline:"",btn:""},on:{click:function(e){t.showtable=!0}}},[a("v-icon",[t._v("subject")])],1),t._v(" "),a("v-btn",{attrs:{outline:"",btn:""},on:{click:function(e){t.showtable=!1}}},[a("v-icon",[t._v("apps")])],1)],1)])],1),t._v(" "),a("v-divider"),t._v(" "),t.showtable?t._e():a("v-layout",{attrs:{row:"",wrap:""}},[t.members.includes(t.user.id)?a("v-flex",{attrs:{xs12:"",sm6:"",md4:"",lg3:"","text-xs-center":""}},[a("v-card",{staticClass:"yellow darken-2",attrs:{height:"20em",hover:""}},[a("v-container",{attrs:{"fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-card-text",[a("v-btn",{staticClass:"cyan darken-4",attrs:{fab:"",dark:"",large:""},on:{click:function(e){t.selectedboardid="",t.openboard=!t.openboard}}},[a("v-icon",{attrs:{large:"",dark:""}},[t._v("add")])],1)],1)],1)],1)],1)],1):t._e(),t._v(" "),t._l(t.orderBy(t.filteredList,"desc.date",-1),function(e){return a("v-flex",{key:e.id,attrs:{xs12:"",sm6:"",md4:"",lg3:""}},[a("v-card",{attrs:{color:"white",to:{name:"board",params:{id:e.id}},hover:"",height:"20em"}},[a("v-list",{staticStyle:{"background-color":"white"},attrs:{subheader:""}},[a("v-subheader",{staticClass:"grey lighten-3",staticStyle:{color:"black"}},[t._v("# "),a("div",{staticClass:"ml-2"},[t._v(t._s(e.title))]),t._v(" "),a("v-spacer"),t._v(" "),a("v-chip",{attrs:{outline:"",color:"black","text-color":"black"}},[t._v("\n                "+t._s(e.desc.department)+"\n              ")])],1),t._v(" "),a("v-list-tile",{staticClass:"mt-3"},[a("v-list-tile-avatar",[a("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("announcement")])],1),t._v(" "),a("v-list-tile-content",["join"==e.desc.issuesource?a("v-list-tile-sub-title",[t._v(t._s(t.$t("Original Name of Topic")))]):t._e(),t._v(" "),"other"==e.desc.issuesource||"dep"==e.desc.issuesource?a("v-list-tile-sub-title",[t._v("提案來源")]):t._e(),t._v(" "),a("v-list-tile-title",{domProps:{innerHTML:t._s(e.desc.title)}})],1)],1),t._v(" "),a("v-list-tile",[a("v-list-tile-avatar",[a("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("face")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-sub-title",[t._v(t._s(t.$t("Initiator")))]),t._v(" "),a("v-list-tile-title",{domProps:{innerHTML:t._s(e.desc.person)}})],1)],1),t._v(" "),a("v-list-tile",[a("v-list-tile-avatar",[a("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("event")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-sub-title",[t._v(t._s(t.$t("Kick-off Date")))]),t._v(" "),a("v-list-tile-title",{domProps:{innerHTML:t._s(e.desc.date)}})],1)],1)],1),t._v(" "),a("v-divider"),t._v(" "),a("v-card-actions",{staticClass:"mt-1",staticStyle:{"background-color":"white"}},[a("v-btn",{staticClass:"blue-grey darken-4 white--text",attrs:{to:{name:"board",params:{id:e.id}}}},[a("v-icon",[t._v("arrow_right")]),t._v(t._s(t.$t("Enter")))],1),t._v(" "),a("v-spacer"),t._v(" "),e.admin.includes(t.user.id)?a("div",[a("v-btn",{attrs:{icon:"",flat:"",color:"teal",to:{name:"index"},"active-class":""},on:{click:function(a){t.openboard=!t.openboard,t.selectedboardid=e.id}}},[a("v-icon",[t._v("edit")])],1),t._v(" "),a("v-btn",{attrs:{icon:"",flat:"",color:"pink",to:{name:"index"},"active-class":""},nativeOn:{click:function(a){a.stopPropagation(),t.dialog=!0,t.selectedboardid=e.id}}},[a("v-icon",[t._v("delete")])],1)],1):t._e()],1)],1)],1)})],2),t._v(" "),t.showtable?[t.members.includes(t.user.id)?a("div",[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){t.openboard=!t.openboard}}},[t._v(t._s(t.$t("New Topic")))])],1):t._e(),t._v(" "),a("v-data-table",{staticClass:"elevation-1 mt-2",attrs:{headers:t.headers,items:t.boards,"hide-actions":"",search:t.search,"disable-initial-sort":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("router-link",{staticClass:"black--text",staticStyle:{"text-decoration":"none"},attrs:{to:{name:"board",params:{id:e.item.id}}}},[t._v(t._s(e.item.title))])],1),t._v(" "),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.desc.title))]),t._v(" "),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.desc.person))]),t._v(" "),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.desc.date))]),t._v(" "),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.desc.department))]),t._v(" "),a("td",{staticClass:"justify-center px-0"},[e.item.admin.includes(t.user.id)?a("div",[a("v-icon",{staticClass:"mr-2",attrs:{color:"teal"},on:{click:function(a){return t.editboard(e.item.id)}}},[t._v("edit")]),t._v(" "),a("v-icon",{attrs:{color:"pink"},on:{click:function(a){t.dialog=!0,t.selectedboardid=e.item.id}}},[t._v("delete")])],1):t._e()])]}}],null,!1,1334048090)},[t._v(" "),a("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[t._v('\n        沒有符合 "'+t._s(t.search)+'" 的搜尋結果:(\n      ')])],1)]:t._e(),t._v(" "),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("確定刪除?")]),t._v(" "),a("v-card-text"),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"black",flat:"flat",to:{name:"index"},"active-class":""},nativeOn:{click:function(e){t.dialog=!1}}},[t._v("取消")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue",flat:"flat"},nativeOn:{click:function(e){return t.closeboard(t.selectedboardid)}}},[t._v("確定")])],1)],1)],1),t._v(" "),a("snackbar"),t._v(" "),a("form-board")],2)},staticRenderFns:[]};var B=a("VU/8")(A,T,!1,function(t){a("j9LM")},"data-v-0d77a8df",null).exports,R=a("BO1k"),E=a.n(R),j=a("DAYN"),I=a.n(j),S=a("KS/y"),P=a.n(S),O=Object(o.a)({getterType:"getBoardField",mutationType:"updateBoardField"}).mapFields,L=Object(o.a)({getterType:"getCardField",mutationType:"updateCardField"}).mapFields,D=Object(o.a)({getterType:"getListField",mutationType:"updateListField"}).mapFields,U={components:{"upload-btn":P.a},data:function(){return{valid:!1,newstakeholdermode:!1,newattachmentmode:!1,titleRules:[function(t){return!!t||"此欄位為必填!"},function(t){return t.length<=30||"此欄位不可超過30個字!"}],responsestring:"",attachmentselection:"attachmentlink",filename:"",uploadfile:FormData,newcard:{title:"",desc:{explain:"",responsetime:"nowadays",department:"",background:"",role:"",stakeholders:[],evidences:[],related:[],attachment:"",x:0,y:0}}}},methods:{bindtitlestyle:function(t){return"問題面向"==t?this.titlecolor="#FFCD13":"問題細節"==t?this.titlecolor="#FFE276":"現有解法"==t?this.titlecolor="#91AD70":"政府回應"==t?this.titlecolor="#F08B8B":"困難"==t?this.titlecolor="#C85938":"利害關係人"==t?this.titlecolor="#21B5C2":"佐證文件"==t&&(this.titlecolor="#D8CAC4"),this.titlestyle+this.titlecolor},changeresponsetime:function(t){t.title=t.title.replace("[現在]","").replace("[未來]",""),"nowadays"==t.desc.responsetime?this.responsestring="[現在]":this.responsestring="[未來]",t.title=this.responsestring+t.title},addstakeholder:function(t){var e=this,a=this;this.lists.map(function(s){"利害關係人"==s.name&&Trello.post("cards",{name:e.newcard.title,idList:s.id,desc:b()(e.newcard.desc)},function(e){a.newcard.title="",t.desc.stakeholders.push(e),a.$store.dispatch("getlists",a.$route.params.id);a.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"新增"})})})},addattachment:function(t){var e=this,a=this;this.lists.map(function(s){"佐證文件"==s.name&&Trello.post("cards",{name:e.newcard.title,idList:s.id,desc:b()(e.newcard.desc)},function(e){if(""!=a.newcard.desc.attachment&&void 0!=a.newcard.desc.attachment)Trello.post("cards/"+e.id+"/attachments",{url:a.newcard.desc.attachment,name:a.newcard.title},function(){a.newcard.title="",a.newcard.desc.attachment="",a.$store.dispatch("getlists",a.$route.params.id);t.desc.evidences.push(e),a.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"新增"})});else if(void 0==a.newcard.attachments){var s=new XMLHttpRequest;s.responseType="json",s.onreadystatechange=function(){if(4===s.readyState){a.newcard.title="",a.$store.dispatch("getlists",a.$route.params.id);t.desc.evidences.push(e),a.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"新增"})}},s.open("POST","https://api.trello.com/1/cards/"+e.id+"/attachments/"),s.send(a.uploadfile)}})})},deleteAttachment:function(t){var e=this;Trello.delete("cards/"+t.id+"/attachments/"+t.attachments.id,function(){e.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"刪除"}),e.$store.dispatch("getlists",e.$route.params.id),e.opencard=!1})},fileChanged:function(t){var e="";e=""!=this.newcard.title?this.newcard.title:this.card.title;var a=new FormData;a.append("key","fb8dab318e1888679f571104d8b36ac7"),a.append("token",localStorage.trello_token),a.append("file",t),a.append("name",e),this.filename=t.name,this.uploadfile=a},resetForm:function(){this.card.title="",this.card.desc.explain="",this.card.desc.department="",this.card.desc.background="",this.card.desc.role="",this.card.desc.stakeholders=[],this.card.desc.evidences=[],this.card.desc.related=[]},submit:function(){var t=this;this.$refs.form.validate()&&(0==this.editable?(this.card.desc.x=100+150*this.selectedlist.cards.length,this.card.desc.y=150*this.selectedlist.column,Trello.post("cards",{name:this.card.title,idList:this.selectedlist.id,desc:b()(this.card.desc)},function(e){if(null!==t.cardFrom){var a={id:e.id,name:t.card.title};t.cardFrom.desc.related.push(a),Trello.put("cards/"+t.cardFrom.id,{desc:b()(t.cardFrom.desc)},function(e){if(""!=t.card.desc.attachment&&void 0!=t.card.desc.attachment)Trello.post("cards/"+e.id+"/attachments",{url:t.card.desc.attachment,name:t.card.title},function(){t.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"新增"}),t.opencard=!1,t.$store.dispatch("getlists",t.$route.params.id)});else if(void 0==t.card.attachments){var a=new XMLHttpRequest;a.responseType="json",a.onreadystatechange=function(){if(4===a.readyState){t.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"新增"}),t.opencard=!1,t.$store.dispatch("getlists",t.$route.params.id)}},a.open("POST","https://api.trello.com/1/cards/"+e.id+"/attachments/"),a.send(t.uploadfile)}})}else if(""!=t.card.desc.attachment&&void 0!=t.card.desc.attachment)Trello.post("cards/"+e.id+"/attachments",{url:t.card.desc.attachment,name:t.card.title},function(){t.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"新增"}),t.opencard=!1,t.$store.dispatch("getlists",t.$route.params.id)});else if(void 0==t.card.attachments){var s=new XMLHttpRequest;s.responseType="json",s.onreadystatechange=function(){if(4===s.readyState){t.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"新增"}),t.opencard=!1,t.$store.dispatch("getlists",t.$route.params.id)}},s.open("POST","https://api.trello.com/1/cards/"+e.id+"/attachments/"),s.send(t.uploadfile)}})):Trello.put("cards/"+this.card.id,{name:this.card.title,idList:this.selectedlist.id,desc:b()(this.card.desc)},function(e){if(void 0==t.card.attachments){if(""!=t.card.desc.attachment&&void 0!=t.card.desc.attachment)Trello.post("cards/"+e.id+"/attachments",{url:t.card.desc.attachment,name:t.card.title},function(){t.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"新增"}),t.opencard=!1,t.$store.dispatch("getlists",t.$route.params.id)});else if(void 0==t.card.attachments){var a=new XMLHttpRequest;a.responseType="json",a.onreadystatechange=function(){if(4===a.readyState){t.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"新增"}),t.opencard=!1,t.$store.dispatch("getlists",t.$route.params.id)}},a.open("POST","https://api.trello.com/1/cards/"+e.id+"/attachments/"),a.send(t.uploadfile)}}else if(t.card.desc.attachment==t.card.attachments.url.replace("http://","")){t.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"修改"}),t.opencard=!1,t.$store.dispatch("getlists",t.$route.params.id)}else if(t.filename==t.card.attachments.name){t.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"修改"}),t.opencard=!1,t.$store.dispatch("getlists",t.$route.params.id)}else if(""==t.card.desc.attachment||void 0==t.card.desc.attachment){t.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"修改"}),t.opencard=!1,t.$store.dispatch("getlists",t.$route.params.id)}else t.attachsnackbar=!0}))}},computed:i()({},Object(n.c)({user:"user"}),O({board:"board"}),L({card:"card",opencard:"opencard",selectedlist:"selectedlist",editable:"editable",titlestyle:"titlestyle",titlecolor:"titlecolor",relatedlist:"relatedlist",deleteCard:"deleteCard",deletedID:"deletedID",attachsnackbar:"attachsnackbar",cardFrom:"cardFrom"}),D({lists:"lists",stakeholders:"stakeholders",evidences:"evidences"}))},Q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"50vw"},model:{value:t.opencard,callback:function(e){t.opencard=e},expression:"opencard"}},[a("v-card",[a("v-card-title",[a("h2",{style:t.bindtitlestyle(t.selectedlist.name)},[t._v(t._s(t.selectedlist.name))]),t._v(" "),a("v-spacer"),t._v(" "),(t.board.admin.includes(t.user.id)||t.board.members.includes(t.user.id))&&1==t.editable?a("div",[a("v-btn",{staticClass:"subheading",attrs:{flat:"",color:"grey"},on:{click:t.resetForm}},[t._v("重新填寫")]),t._v(" "),a("v-btn",{staticClass:"subheading",attrs:{flat:"",color:"red lighten-1"},nativeOn:{click:function(e){e.stopPropagation(),t.deleteCard=!0,t.deletedID=t.card.id}}},[t._v("刪除便利貼")])],1):t._e()],1),t._v(" "),a("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.submit(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-container",[a("v-layout",{attrs:{row:"",wrap:"","mx-3":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{"align-center":"","justify-start":"",row:"","fill-height":""}},[a("v-icon",[t._v("announcement")]),t._v(" "),a("h3",{staticStyle:{color:"rgba(0,0,0,.54)"}},[t._v("內容")])],1)],1),t._v(" "),a("v-flex",{attrs:{md12:"","mx-4":""}},[a("v-layout",{attrs:{row:"",wrap:""}},["利害關係人"==t.selectedlist.name?a("v-flex",{attrs:{flex:"",xs12:""}},[a("v-text-field",{attrs:{color:"blue-grey darken-2",label:"稱謂/單位名稱",counter:30,rules:t.titleRules},model:{value:t.card.title,callback:function(e){t.$set(t.card,"title",e)},expression:"card.title"}})],1):"佐證文件"==t.selectedlist.name?a("v-flex",{attrs:{flex:"",xs12:""}},[a("v-text-field",{attrs:{color:"blue-grey darken-2",label:"佐證文件名稱",counter:30,rules:t.titleRules},model:{value:t.card.title,callback:function(e){t.$set(t.card,"title",e)},expression:"card.title"}})],1):a("v-flex",{attrs:{flex:"",xs12:""}},[a("v-text-field",{attrs:{color:"blue-grey darken-2",counter:30,rules:t.titleRules},model:{value:t.card.title,callback:function(e){t.$set(t.card,"title",e)},expression:"card.title"}})],1)],1),t._v(" "),"問題細節"==t.selectedlist.name?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{flex:"",xs12:""}},[a("v-text-field",{attrs:{color:"blue-grey darken-2",label:"補充說明"},model:{value:t.card.desc.explain,callback:function(e){t.$set(t.card.desc,"explain",e)},expression:"card.desc.explain"}})],1)],1):t._e(),t._v(" "),"政府回應"==t.selectedlist.name?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{flex:"",xs12:""}},[a("v-radio-group",{attrs:{row:""},on:{change:function(e){return t.changeresponsetime(t.card)}},model:{value:t.card.desc.responsetime,callback:function(e){t.$set(t.card.desc,"responsetime",e)},expression:"card.desc.responsetime"}},[a("v-radio",{attrs:{label:"現在",value:"nowadays",selected:""}}),t._v(" "),a("v-radio",{attrs:{label:"未來",color:"orange",value:"future"}})],1)],1),t._v(" "),a("v-flex",{attrs:{flex:"",xs12:""}},[a("v-text-field",{attrs:{color:"blue-grey darken-2",label:"補充說明"},model:{value:t.card.desc.explain,callback:function(e){t.$set(t.card.desc,"explain",e)},expression:"card.desc.explain"}})],1)],1):t._e(),t._v(" "),"困難"==t.selectedlist.name?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{flex:"",xs12:""}},[a("v-text-field",{attrs:{color:"blue-grey darken-2",label:"補充說明"},model:{value:t.card.desc.explain,callback:function(e){t.$set(t.card.desc,"explain",e)},expression:"card.desc.explain"}})],1)],1):t._e(),t._v(" "),"利害關係人"==t.selectedlist.name?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{flex:"",xs12:""}},[a("v-text-field",{attrs:{color:"blue-grey darken-2",label:"單位"},model:{value:t.card.desc.department,callback:function(e){t.$set(t.card.desc,"department",e)},expression:"card.desc.department"}})],1),t._v(" "),a("v-flex",{attrs:{flex:"",xs12:""}},[a("v-text-field",{attrs:{color:"blue-grey darken-2",label:"背景"},model:{value:t.card.desc.background,callback:function(e){t.$set(t.card.desc,"background",e)},expression:"card.desc.background"}})],1),t._v(" "),a("v-flex",{attrs:{flex:"",xs12:""}},[a("v-text-field",{attrs:{color:"blue-grey darken-2",label:"角色（此人與議題的關聯）"},model:{value:t.card.desc.role,callback:function(e){t.$set(t.card.desc,"role",e)},expression:"card.desc.role"}})],1)],1):t._e(),t._v(" "),"佐證文件"==t.selectedlist.name?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{flex:"",xs12:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md12:""}},[a("v-radio-group",{attrs:{row:""},model:{value:t.attachmentselection,callback:function(e){t.attachmentselection=e},expression:"attachmentselection"}},[a("v-radio",{attrs:{label:"新增連結",value:"attachmentlink"}}),t._v(" "),a("v-radio",{attrs:{label:"上傳檔案",value:"attachmentupload"}})],1)],1),t._v(" "),"attachmentlink"==t.attachmentselection?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md12:""}},[a("v-text-field",{attrs:{color:"blue-grey darken-2",label:"文件連結"},model:{value:t.card.desc.attachment,callback:function(e){t.$set(t.card.desc,"attachment",e)},expression:"card.desc.attachment"}})],1)],1):t._e(),t._v(" "),"attachmentupload"==t.attachmentselection?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md4:""}},[a("upload-btn",{staticClass:"mt-3",attrs:{depressed:"",outline:"",title:"附加檔案",fileChangedCallback:t.fileChanged}},[a("template",{slot:"icon-left"},[a("v-icon",{attrs:{left:""}},[t._v("attach_file")])],1)],2)],1),t._v(" "),a("v-flex",{attrs:{md2:""}},[a("h3",{staticClass:"mt-4"},[t._v(t._s(t.filename))])])],1):t._e()],1)],1)],1):t._e()],1),t._v(" "),t.board.admin.includes(t.user.id)||t.board.members.includes(t.user.id)?a("v-flex",{attrs:{md12:"","mx-2":""}},["佐證文件"!=t.selectedlist.name&&"利害關係人"!=t.selectedlist.name?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",[0==t.newstakeholdermode&&0==t.newattachmentmode?a("v-btn",{attrs:{flat:"",color:"primary"},nativeOn:{click:function(e){t.newstakeholdermode=!0}}},[t._v("+新增利害關係人")]):t._e(),t._v(" "),0==t.newattachmentmode&&0==t.newstakeholdermode?a("v-btn",{attrs:{flat:"",color:"primary"},nativeOn:{click:function(e){t.newattachmentmode=!0}}},[t._v("+新增佐證文件\n                  "),a("v-tooltip",{attrs:{bottom:""}},[a("v-icon",{staticClass:"ml-1",attrs:{slot:"activator"},slot:"activator"},[t._v("info")]),t._v(" "),a("span",[t._v("1.既有資料是否可以先提供？這些資料包含："),a("br"),t._v("\n                    -過去各項會議(內部會議、跨部會協調會議、專家學者會議等)討論的相關內參資料"),a("br"),t._v("\n                    -是否有推薦相關的研究論文"),a("br"),t._v("\n                    -其他不同意立場的陳述或是好文章"),a("br"),t._v("\n                    2.相關法制規定為何？過去相關規定的修正有沒有討論記錄？"),a("br"),t._v("\n                    3.有沒有立委曾經關心過此議題？立法院有沒有討論過此議題？有沒有會議記錄與部會當時的文書？"),a("br"),t._v("\n                    4.有沒有民間關心過此議題?"),a("br"),t._v("\n                    -有沒有NGO關心過此議題？有沒有相關的資料？"),a("br"),t._v("\n                    -有沒有陳抗過？收過陳情書？"),a("br"),t._v("\n                    -部長信箱有沒有收過類似的問題？"),a("br")])],1)],1):t._e()],1)],1):t._e()],1):t._e(),t._v(" "),1==t.newstakeholdermode?a("v-flex",{attrs:{md12:"","mx-4":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md6:""}},[a("v-text-field",{attrs:{color:"blue-grey darken-2",label:"稱謂/單位名稱"},model:{value:t.newcard.title,callback:function(e){t.$set(t.newcard,"title",e)},expression:"newcard.title"}})],1),t._v(" "),a("v-flex",{attrs:{md6:""}},[a("v-btn",{staticClass:"mt-3",attrs:{color:"black",small:"",outline:""},nativeOn:{click:function(e){t.newstakeholdermode=!1,t.newcard.title=""}}},[t._v("取消")]),t._v(" "),a("v-btn",{staticClass:"mt-3",attrs:{color:"black",small:"",dark:""},nativeOn:{click:function(e){t.newstakeholdermode=!1,t.addstakeholder(t.card)}}},[t._v("確定")])],1)],1)],1):t._e(),t._v(" "),0==t.newstakeholdermode&&0==t.newattachmentmode?a("v-flex",{attrs:{flex:"",md12:"","mx-4":""}},["利害關係人"!=t.selectedlist.name?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{flex:"",xs12:""}},[a("v-select",{attrs:{items:t.stakeholders,"item-text":"name","item-value":"id",label:"關聯利害關係人(資料來源)","return-object":"",chips:"",multiple:"","deletable-chips":"","no-data-text":"目前尚無資料"},model:{value:t.card.desc.stakeholders,callback:function(e){t.$set(t.card.desc,"stakeholders",e)},expression:"card.desc.stakeholders"}})],1)],1):t._e()],1):t._e(),t._v(" "),1==t.newattachmentmode?a("v-flex",{attrs:{md12:"","mx-4":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md12:""}},[a("v-radio-group",{attrs:{row:""},model:{value:t.attachmentselection,callback:function(e){t.attachmentselection=e},expression:"attachmentselection"}},[a("v-radio",{attrs:{label:"新增連結",value:"attachmentlink"}}),t._v(" "),a("v-radio",{attrs:{label:"上傳檔案",value:"attachmentupload"}})],1)],1),t._v(" "),"attachmentlink"==t.attachmentselection?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md12:""}},[a("v-text-field",{attrs:{color:"blue-grey darken-2",label:"佐證文件名稱",counter:30,rules:t.titleRules},model:{value:t.newcard.title,callback:function(e){t.$set(t.newcard,"title",e)},expression:"newcard.title"}})],1),t._v(" "),a("v-flex",{attrs:{md12:""}},[a("v-text-field",{attrs:{color:"blue-grey darken-2",label:"文件連結"},model:{value:t.newcard.desc.attachment,callback:function(e){t.$set(t.newcard.desc,"attachment",e)},expression:"newcard.desc.attachment"}})],1)],1):t._e(),t._v(" "),"attachmentupload"==t.attachmentselection?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md6:""}},[a("v-text-field",{attrs:{color:"blue-grey darken-2",label:"佐證文件名稱",counter:30,rules:t.titleRules},model:{value:t.newcard.title,callback:function(e){t.$set(t.newcard,"title",e)},expression:"newcard.title"}})],1),t._v(" "),a("v-flex",{attrs:{md4:""}},[a("upload-btn",{staticClass:"mt-3",attrs:{depressed:"",outline:"",title:"附加檔案",fileChangedCallback:t.fileChanged}},[a("template",{slot:"icon-left"},[a("v-icon",{attrs:{left:""}},[t._v("attach_file")])],1)],2)],1),t._v(" "),a("v-flex",{attrs:{md2:""}},[a("h3",{staticClass:"mt-4"},[t._v(t._s(t.filename))])])],1):t._e(),t._v(" "),a("v-flex",{attrs:{md12:""}},[a("v-layout",{attrs:{"align-center":"","justify-end":"",row:"","fill-height":""}},[a("v-btn",{staticClass:"mt-3",attrs:{color:"black",small:"",outline:""},nativeOn:{click:function(e){t.newattachmentmode=!1,t.newcard.title="",t.newcard.desc.attachment=""}}},[t._v("取消")]),t._v(" "),a("v-btn",{staticClass:"mt-3",attrs:{color:"black",small:"",dark:""},nativeOn:{click:function(e){t.newattachmentmode=!1,t.addattachment(t.card)}}},[t._v("確定")])],1)],1)],1)],1):t._e(),t._v(" "),0==t.newstakeholdermode&&0==t.newattachmentmode?a("v-flex",{attrs:{flex:"",md12:"","mx-4":""}},["佐證文件"!=t.selectedlist.name&&"利害關係人"!=t.selectedlist.name?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{flex:"",xs12:""}},[a("v-select",{attrs:{items:t.evidences,"item-text":"name","item-value":"id",label:"選取佐證文件","return-object":"",chips:"",multiple:"","deletable-chips":"","no-data-text":"目前尚無資料"},model:{value:t.card.desc.evidences,callback:function(e){t.$set(t.card.desc,"evidences",e)},expression:"card.desc.evidences"}})],1)],1):t._e()],1):t._e(),t._v(" "),0==t.newstakeholdermode&&0==t.newattachmentmode?a("v-flex",{attrs:{flex:"",md12:""}},["佐證文件"!=t.selectedlist.name&&"利害關係人"!=t.selectedlist.name?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{flex:"",xs12:""}},[a("v-select",{attrs:{items:t.relatedlist,"item-text":"name","item-value":"id",label:"關聯卡片","return-object":"",chips:"",multiple:"","deletable-chips":"","no-data-text":"目前尚無資料","prepend-icon":"fa-link"},model:{value:t.card.desc.related,callback:function(e){t.$set(t.card.desc,"related",e)},expression:"card.desc.related"}})],1)],1):t._e()],1):t._e(),t._v(" "),"佐證文件"==t.selectedlist.name&&1==t.editable&&void 0!=t.card.attachments&&void 0!=t.card.attachments.preview?a("v-flex",{attrs:{flex:"",xs12:""}},[a("v-card",[a("v-card-media",{attrs:{src:t.card.attachments.preview.url,height:t.card.attachments.preview.height}}),t._v(" "),a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-0"},[t._v(t._s(t.card.attachments.name))])])]),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"",target:"_blank",href:t.card.attachments.url}},[t._v("下載附件")]),t._v(" "),a("v-btn",{attrs:{flat:"",color:"error"},on:{click:function(e){return t.deleteAttachment(t.card)}}},[t._v("刪除附件")])],1)],1)],1):t._e(),t._v(" "),"佐證文件"==t.selectedlist.name&&1==t.editable&&void 0!=t.card.attachments&&void 0==t.card.attachments.preview?a("v-flex",{attrs:{flex:"",xs12:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-0"},[t._v(t._s(t.card.attachments.name))])])]),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"",target:"_blank",href:t.card.attachments.url}},[t._v("下載附件")]),t._v(" "),a("v-btn",{attrs:{flat:"",color:"error"},on:{click:function(e){return t.deleteAttachment(t.card)}}},[t._v("刪除附件")])],1)],1)],1):t._e()],1),t._v(" "),(t.board.admin.includes(t.user.id)||t.board.members.includes(t.user.id))&&0==t.newstakeholdermode&&0==t.newattachmentmode?a("v-card-actions",{staticClass:"px-3"},[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"subheading",attrs:{flat:""},nativeOn:{click:function(e){t.opencard=!t.opencard}}},[t._v("取消")]),t._v(" "),a("v-btn",{staticClass:"subheading",attrs:{flat:"",color:"cyan",type:"submit",disabled:!t.valid}},[t._v("確認")])],1):t._e(),t._v(" "),t.board.admin.includes(t.user.id)||t.board.members.includes(t.user.id)?t._e():a("v-card-actions",{staticClass:"px-3"},[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"subheading",attrs:{flat:""},nativeOn:{click:function(e){t.opencard=!t.opencard}}},[t._v("關閉")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var H=a("VU/8")(U,Q,!1,function(t){a("4goK")},null,null).exports,z=a("Xxa5"),X=a.n(z),N=a("exGp"),K=a.n(N),V=Object(o.a)({getterType:"getDictionaryField",mutationType:"updateDictionaryField"}).mapFields,Z={data:function(){return{listid:"",dictionaries:[],dictionary:{id:"",name:"",desc:{explain:"",source:""}},newdictionarymode:!1,edit:!1,search:"",deletedialog:!1,selectedid:""}},methods:i()({},Object(n.b)(["getsnackbar"]),{getDictionary:function(){var t=K()(X.a.mark(function t(){var e,a=this;return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,this.dictionaries=[],t.next=4,Trello.boards.get(this.$route.params.id+"/lists",{cards:"open"});case 4:t.sent.map(function(t){"專有名詞字典"==t.name&&(e.listid=t.id,t.cards.map(function(t){t.desc=JSON.parse(t.desc),a.dictionaries.push(t)}))});case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addDictionary:function(){var t=K()(X.a.mark(function t(){var e;return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this,this.edit?Trello.put("cards/"+this.dictionary.id,{name:this.dictionary.name,idList:this.listid,desc:b()(this.dictionary.desc)},function(t){e.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"修改"})}):Trello.post("cards",{name:this.dictionary.name,idList:this.listid,desc:b()(this.dictionary.desc)},function(t){e.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"新增"}),e.getDictionary()});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),editDictionary:function(t){this.dictionary=t,this.newdictionarymode=!0,this.edit=!0},deleteDictionary:function(t){var e=this;Trello.put("cards/"+t,{closed:!0},function(t){e.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"刪除"}),e.getDictionary()})}}),created:function(){this.getDictionary()},computed:i()({},V({opendictionary:"opendictionary"}),{filteredList:function(){var t=this;return this.dictionaries.filter(function(e){return e.name.toLowerCase().includes(t.search.toLowerCase())})}})},W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-navigation-drawer",{attrs:{right:"",app:"","disable-route-watcher":"",temporary:""},model:{value:t.opendictionary,callback:function(e){t.opendictionary=e},expression:"opendictionary"}},[a("v-toolbar",{attrs:{color:"#FFCD13"}},[a("v-toolbar-title",[t._v("專有名詞字典/筆記\n         "),a("v-tooltip",{attrs:{bottom:""}},[a("v-icon",{staticClass:"ml-1",attrs:{slot:"activator"},slot:"activator"},[t._v("info")]),t._v(" "),a("span",[t._v("你可以於此新增議題相關專有名詞及其解釋，以利同仁間建立共同語言")])],1)],1)],1),t._v(" "),a("v-text-field",{attrs:{color:"blue-grey darken-4","prepend-icon":"search",label:"搜尋關鍵字","single-line":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),0==t.newdictionarymode?a("v-btn",{attrs:{flat:"",color:"primary"},nativeOn:{click:function(e){t.newdictionarymode=!0}}},[t._v("+新增專有名詞")]):t._e(),t._v(" "),1==t.newdictionarymode?a("v-container",{attrs:{"grid-list-xs":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{color:"blue-grey darken-2",label:"專有名詞"},model:{value:t.dictionary.name,callback:function(e){t.$set(t.dictionary,"name",e)},expression:"dictionary.name"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{color:"blue-grey darken-2",label:"名詞解釋"},model:{value:t.dictionary.desc.explain,callback:function(e){t.$set(t.dictionary.desc,"explain",e)},expression:"dictionary.desc.explain"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{color:"blue-grey darken-2",label:"資料來源"},model:{value:t.dictionary.desc.source,callback:function(e){t.$set(t.dictionary.desc,"source",e)},expression:"dictionary.desc.source"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{"align-center":"","justify-end":"",row:"","fill-height":""}},[a("v-btn",{staticClass:"mt-3",attrs:{color:"black",small:"",outline:""},nativeOn:{click:function(e){t.newdictionarymode=!1}}},[t._v("取消")]),t._v(" "),a("v-btn",{staticClass:"mt-3",attrs:{color:"black",small:"",dark:""},nativeOn:{click:function(e){t.newdictionarymode=!1,t.addDictionary()}}},[t._v("確定")])],1)],1)],1)],1):t._e(),t._v(" "),a("v-list",{attrs:{"two-line":"",subheader:""}},t._l(t.filteredList,function(e){return a("v-list-tile",{key:e.id,on:{click:function(a){return t.editDictionary(e)}}},[a("v-list-tile-action",[a("v-icon",[t._v("fa-book")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.name))]),t._v(" "),a("v-list-tile-sub-title",[t._v(t._s(e.desc.explain))])],1),t._v(" "),a("v-list-tile-action",[a("v-btn",{attrs:{icon:"",ripple:""}},[a("v-icon",{on:{click:function(a){a.stopPropagation(),t.deletedialog=!0,t.selectedid=e.id}}},[t._v("fa-times")])],1)],1)],1)}),1),t._v(" "),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.deletedialog,callback:function(e){t.deletedialog=e},expression:"deletedialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("確定刪除?")]),t._v(" "),a("v-card-text"),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"blue",flat:"flat"},nativeOn:{click:function(e){t.deletedialog=!1,t.deleteDictionary(t.selectedid)}}},[t._v("確定")]),t._v(" "),a("v-btn",{attrs:{color:"black",flat:"flat"},nativeOn:{click:function(e){t.deletedialog=!1}}},[t._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var M=a("VU/8")(Z,W,!1,function(t){a("iBRy")},null,null).exports,Y=Object(o.a)({getterType:"getBoardField",mutationType:"updateBoardField"}).mapFields,$=Object(o.a)({getterType:"getCardField",mutationType:"updateCardField"}).mapFields,q=Object(o.a)({getterType:"getListField",mutationType:"updateListField"}).mapFields,J=Object(o.a)({getterType:"getDictionaryField",mutationType:"updateDictionaryField"}).mapFields,G={components:{dictionary:M,snackbar:y},data:function(){return{members:[],avatar:[],success:"",show_new_member:!1,email:"",relationmode:!1,newmemberdialog:!1,mode:"board",items:[{title:"問題面向"},{title:"問題細節"},{title:"現有解法"},{title:"政府回應"},{title:"困難"}],linkingMode:!1}},methods:i()({},Object(n.b)(["getboardinfo","getlists","getsnackbar"]),{new_member:function(){this.newmemberdialog=!0},newmember:function(){var t=this,e=!0,a=!1,s=void 0;try{for(var r,i=E()(this.email.replace(" ","").split(","));!(e=(r=i.next()).done);e=!0){var n=r.value;Trello.put("boards/"+this.board.id+"/members",{email:n,type:"normal"},function(e){t.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"新增"}),t.$store.dispatch("getboardinfo",t.$route.params.id)})}}catch(t){a=!0,s=t}finally{try{!e&&i.return&&i.return()}finally{if(a)throw s}}},newcard:function(t){var e=this;this.lists.map(function(a){a.name==t&&(e.opencard=!0,e.selectedlist.name=a.name,e.selectedlist.id=a.id,e.selectedlist.color=a.color,e.selectedlist.cards=a.cards,e.selectedlist.column=a.column,e.editable=!1,"政府回應"==e.selectedlist.name&&("nowadays"==e.card.desc.responsetime?e.card.title="[現在]":e.card.title="[未來]"),e.getrelated(a))})},getrelated:function(t){var e=this;this.relatedlist=[],this.lists.map(function(a){"問題面向"==t.name?"問題細節"==a.name&&a.cards.map(function(t){e.relatedlist.push({id:t.id,name:t.name,desc:t.desc})}):"問題細節"==t.name?"現有解法"==a.name&&a.cards.map(function(t){e.relatedlist.push({id:t.id,name:t.name,desc:t.desc})}):"現有解法"==t.name?"政府回應"==a.name&&a.cards.map(function(t){e.relatedlist.push({id:t.id,name:t.name,desc:t.desc})}):"政府回應"==t.name&&"困難"==a.name&&a.cards.map(function(t){e.relatedlist.push({id:t.id,name:t.name,desc:t.desc})})})}}),created:function(){"board"==this.$route.name?this.mode="board":this.mode="mindmap"},computed:i()({},Object(n.c)({user:"user"}),Y({board:"board",openstakeholders:"openstakeholders",openevidences:"openevidences",boardtitledialog:"boardtitledialog",search:"search"}),$({card:"card",opencard:"opencard",selectedlist:"selectedlist",editable:"editable",titlestyle:"titlestyle",titlecolor:"titlecolor",relatedlist:"relatedlist",deleteCard:"deleteCard",deletedID:"deletedID",attachsnackbar:"attachsnackbar"}),q({lists:"lists",stakeholders:"stakeholders",evidences:"evidences",stakeholderList:"stakeholderList",evidenceList:"evidenceList"}),J({opendictionary:"opendictionary"}))},tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs9:""}},[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("div",{staticClass:"headline"},[t._v("# "+t._s(t.board.name)+" \n            "),t._v(" "),t._l(t.board.avatars,function(t){return a("v-btn",{key:t,staticClass:"mb-3",attrs:{icon:"",small:"",fab:"",disabled:""}},[a("img",null!==t?{staticStyle:{"border-radius":"50%"},attrs:{src:t+"/50.png"}}:{staticStyle:{"border-radius":"50%"},attrs:{src:"https://c7.uihere.com/files/150/864/961/anonymous-icon-business-user-cliparts.jpg",width:"55"}})])}),t._v(" "),t.board.admin.includes(t.user.id)?a("v-icon",{staticClass:" dark ml-2",attrs:{medium:"",fab:"",btn:"",outline:""},on:{click:function(e){return t.new_member()}}},[t._v("person_add")]):t._e()],2)])],1)],1),t._v(" "),"board"==t.mode?a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{staticClass:"mt-3 mb-0",attrs:{color:"grey darken-4","prepend-icon":"search",label:"搜尋卡片關鍵字",value:"Input text"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1):t._e()],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md6:""}},[a("v-btn-toggle",{model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}},[a("v-btn",{attrs:{flat:"",value:"board",to:{name:"board",params:{id:t.board.id}}}},[t._v("\n          議題分析表\n        ")]),t._v(" "),a("v-btn",{attrs:{flat:"",value:"mindmap",to:{name:"mindmap",params:{id:t.board.id}}}},[t._v("\n          心智圖\n        ")])],1)],1),t._v(" "),a("v-flex",{attrs:{md6:""}},[a("v-layout",{attrs:{"align-center":"","justify-start":"",row:"",reverse:"","fill-height":""}},[a("v-btn",{attrs:{flat:"",target:"_blank",href:t.board.desc.link}},[t._v("會議記錄連結")]),t._v(" "),a("v-btn",{attrs:{disabled:"",flat:"",to:{name:"printout",params:{id:t.board.id}}}},[t._v("輸出文件")]),t._v(" "),a("v-btn",{attrs:{flat:""},on:{click:function(e){e.stopPropagation(),t.opendictionary=!t.opendictionary}}},[t._v("專有名詞字典")])],1)],1),t._v(" "),"board"==t.mode?a("v-flex",{attrs:{md12:""}},[a("v-btn",{attrs:{flat:"",icon:""},nativeOn:{click:function(e){t.openstakeholders=!0}}},[a("v-icon",{attrs:{large:""}},[t._v("supervisor_account")])],1),t._v(" "),a("v-btn",{attrs:{flat:"",icon:""},nativeOn:{click:function(e){t.openevidences=!0}}},[a("v-icon",{attrs:{large:""}},[t._v("attachment")])],1)],1):t._e(),t._v(" "),"mindmap"==t.mode?a("v-flex",{attrs:{md12:""}},[a("v-layout",{attrs:{"align-center":"","justify-start":"",row:"","fill-height":""}},[a("v-menu",{scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{flat:"",icon:""}},Object.assign({},r,s)),[a("v-icon",{attrs:{large:""}},[t._v("note")])],1)]}}],null,!0)},[t._v(" "),a("span",[t._v("新增卡片")])])]}}],null,!1,1594734041)},[t._v(" "),a("v-list",t._l(t.items,function(e,s){return a("v-list-tile",{key:s,on:{click:function(a){return t.newcard(e.title)}}},[a("v-list-tile-title",[t._v(t._s(e.title))])],1)}),1)],1),t._v(" "),a("v-item-group",[a("v-item",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.active,r=e.toggle;return a("v-btn",{attrs:{flat:"",icon:"",color:s?"primary":""},on:{click:r}},[a("v-icon",[t._v("fa-link")])],1)}}],null,!1,3129682395)}),t._v(" "),a("v-item",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.active,r=e.toggle;return a("v-btn",{attrs:{flat:"",icon:"",color:s?"primary":""},on:{click:r}},[a("v-icon",[t._v("fa-unlink")])],1)}}],null,!1,3104421568)})],1)],1)],1):t._e()],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"50vw"},model:{value:t.newmemberdialog,callback:function(e){t.newmemberdialog=e},expression:"newmemberdialog"}},[a("v-card",[a("v-card-title",[t._v("\n        新增議題成員\n      ")]),t._v(" "),a("v-card-text",[a("v-form",[a("v-container",[a("v-layout",[a("v-flex",[a("v-text-field",{staticClass:"mt-0 mb-0",attrs:{color:"grey darken-4",label:"請輸入email(可輸入多個email，中間以 , 分開)",value:"Input text"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"subheading",attrs:{flat:""},on:{click:function(e){t.newmemberdialog=!1}}},[t._v("取消")]),t._v(" "),a("v-btn",{staticClass:"subheading",attrs:{flat:"",color:"cyan",type:"submit"},on:{click:function(e){return t.newmember()}}},[t._v("確認")])],1)],1)],1),t._v(" "),a("dictionary")],1)},staticRenderFns:[]};var et=a("VU/8")(G,tt,!1,function(t){a("tZTL")},null,null).exports,at=Object(o.a)({getterType:"getBoardField",mutationType:"updateBoardField"}).mapFields,st=Object(o.a)({getterType:"getCardField",mutationType:"updateCardField"}).mapFields,rt=Object(o.a)({getterType:"getListField",mutationType:"updateListField"}).mapFields,it={components:{draggable:I.a,"upload-btn":P.a,"form-card":H,snackbar:y,toolbar:et},data:function(){return{members:[],avatar:[],success:"",hover:!1,relationmode:!1,firstcard:{},tab:"tab-1"}},methods:i()({},Object(n.b)(["getboardinfo","getlists","getsnackbar"]),{movecard:function(t){Trello.put("cards/"+t.item.id,{idList:t.to.id},function(t){})},getrelated:function(t){var e=this;this.relatedlist=[],this.lists.map(function(a){"問題面向"==t.name?"問題細節"==a.name&&a.cards.map(function(t){e.relatedlist.push({id:t.id,name:t.name,desc:t.desc})}):"問題細節"==t.name?"現有解法"==a.name&&a.cards.map(function(t){e.relatedlist.push({id:t.id,name:t.name,desc:t.desc})}):"現有解法"==t.name?"政府回應"==a.name&&a.cards.map(function(t){e.relatedlist.push({id:t.id,name:t.name,desc:t.desc})}):"政府回應"==t.name&&"困難"==a.name&&a.cards.map(function(t){e.relatedlist.push({id:t.id,name:t.name,desc:t.desc})})})},newcard:function(t){this.opencard=!0,this.selectedlist.name=t.name,this.selectedlist.id=t.id,this.selectedlist.color=t.color,this.selectedlist.cards=t.cards,this.selectedlist.column=t.column,this.editable=!1,"政府回應"==this.selectedlist.name&&("nowadays"==this.card.desc.responsetime?this.card.title="[現在]":this.card.title="[未來]"),this.getrelated(t)},editcard:function(t,e){this.opencard=!0,this.selectedlist.name=e.name,this.selectedlist.id=e.id,this.selectedlist.color=e.color,this.selectedlist.cards=e.cards,this.selectedlist.column=e.column,this.card.id=t.id,this.card.title=t.name,this.card.desc.responsetime=t.desc.responsetime,this.card.desc.data=t.desc.data,this.card.desc.related=t.desc.related,this.card.desc.explain=t.desc.explain,this.card.desc.role=t.desc.role,this.card.desc.department=t.desc.department,this.card.desc.background=t.desc.background,this.card.desc.stakeholders=t.desc.stakeholders,this.card.desc.evidences=t.desc.evidences,this.card.desc.attachment=t.desc.attachment,this.card.desc.x=t.desc.x,this.card.desc.y=t.desc.y,this.card.attachments=t.attachments,this.editable=!0,this.getrelated(e)},searchcards:function(t){var e=this;return t.cards.filter(function(t){return t.name.toLowerCase().includes(e.search.toLowerCase())})},closecard:function(t){var e=this;Trello.put("cards/"+t,{closed:!0},function(t){e.getlists(e.board.id);e.opencard=!1,e.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"刪除"})})},getavatar:function(){var t=this;this.board.admin.map(function(e){Trello.get("/members/"+e,function(e){t.avatar.push(e.avatarUrl)})}),this.board.members.map(function(e){Trello.get("/members/"+e,function(e){t.avatar.push(e.avatarUrl)})})},getmembers:function(){var t=this,e=this.$route.params.id,a=[];Trello.boards.get(e+"/members",function(e){var s=!0,r=!1,i=void 0;try{for(var n,o=E()(e);!(s=(n=o.next()).done);s=!0){var c=n.value;a.push(c.username),t.getavatar(c.username)}}catch(t){r=!0,i=t}finally{try{!s&&o.return&&o.return()}finally{if(r)throw i}}}),this.members=a},newmember:function(){var t=this,e=!0,a=!1,s=void 0;try{for(var r,i=E()(this.email.replace(" ","").split(","));!(e=(r=i.next()).done);e=!0){var n=r.value;Trello.put("boards/"+this.board.id+"/members",{email:n,type:"normal"},function(e){t.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"新增"}),t.$store.dispatch("getboardinfo",t.$route.params.id)})}}catch(t){a=!0,s=t}finally{try{!e&&i.return&&i.return()}finally{if(a)throw s}}},getcolor:function(){if(1==this.hover)return"black";switch(list.name){case"問題面向":return"yellow darken-2";case"問題細節":return"amber lighten-3";case"現有解法":return"light-green darken-2";case"政府回應":return"deep-orange lighten-1";case"困難":return"red accent-1";case"利害關係人":return"cyan darken-2";case"佐證文件":return"blue-grey lighten-4";default:return"teal"}},changecolor:function(t,e){var a=this;if(0==this.relationmode)if(1==this.hover)if("利害關係人"==e.name)t.color="blue-grey darken-2",t.hover=!0,this.lists.map(function(e){e.cards.map(function(e){void 0!=e.desc.peoplefrom&&e.desc.peoplefrom.map(function(a){a==t.id&&(e.color="blue-grey darken-2",e.hover=!0)})})}),this.lists.map(function(e){e.cards.map(function(e){void 0!=e.desc.peopleto&&e.desc.peopleto.map(function(a){a==t.id&&(e.color="blue-grey darken-2",e.hover=!0)})})});else if("佐證文件"==e.name)t.color="blue-grey darken-2",t.hover=!0,this.lists.map(function(e){e.cards.map(function(e){void 0!=e.desc.data&&e.desc.data.map(function(a){a==t.id&&(e.color="blue-grey darken-2",e.hover=!0)})})});else{if(t.color="blue-grey darken-2",t.hover=!0,void 0!=t.desc.peoplefrom){var s=!0,r=!1,i=void 0;try{for(var n,o=E()(t.desc.peoplefrom);!(s=(n=o.next()).done);s=!0){var c=n.value,d=!0,l=!1,u=void 0;try{for(var v,m=E()(this.lists);!(d=(v=m.next()).done);d=!0){var f=v.value,p=!0,h=!1,b=void 0;try{for(var g,x=E()(f.cards);!(p=(g=x.next()).done);p=!0){var y=g.value;y.id==c&&(y.color="blue-grey darken-2",y.hover=!0)}}catch(t){h=!0,b=t}finally{try{!p&&x.return&&x.return()}finally{if(h)throw b}}}}catch(t){l=!0,u=t}finally{try{!d&&m.return&&m.return()}finally{if(l)throw u}}}}catch(t){r=!0,i=t}finally{try{!s&&o.return&&o.return()}finally{if(r)throw i}}}if(void 0!=t.desc.peopleto){var k=!0,w=!1,_=void 0;try{for(var C,F=E()(t.desc.peopleto);!(k=(C=F.next()).done);k=!0){var A=C.value,T=!0,B=!1,R=void 0;try{for(var j,I=E()(this.lists);!(T=(j=I.next()).done);T=!0){var S=j.value,P=!0,O=!1,L=void 0;try{for(var D,U=E()(S.cards);!(P=(D=U.next()).done);P=!0){var Q=D.value;Q.id==A&&(Q.color="blue-grey darken-2",Q.hover=!0)}}catch(t){O=!0,L=t}finally{try{!P&&U.return&&U.return()}finally{if(O)throw L}}}}catch(t){B=!0,R=t}finally{try{!T&&I.return&&I.return()}finally{if(B)throw R}}}}catch(t){w=!0,_=t}finally{try{!k&&F.return&&F.return()}finally{if(w)throw _}}}if(void 0!=t.desc.data){var H=!0,z=!1,X=void 0;try{for(var N,K=E()(t.desc.data);!(H=(N=K.next()).done);H=!0){var V=N.value,Z=!0,W=!1,M=void 0;try{for(var Y,$=E()(this.lists);!(Z=(Y=$.next()).done);Z=!0){var q=Y.value,J=!0,G=!1,tt=void 0;try{for(var et,at=E()(q.cards);!(J=(et=at.next()).done);J=!0){var st=et.value;st.id==V&&(st.color="blue-grey darken-2",st.hover=!0)}}catch(t){G=!0,tt=t}finally{try{!J&&at.return&&at.return()}finally{if(G)throw tt}}}}catch(t){W=!0,M=t}finally{try{!Z&&$.return&&$.return()}finally{if(W)throw M}}}}catch(t){z=!0,X=t}finally{try{!H&&K.return&&K.return()}finally{if(z)throw X}}}void 0!=t.desc.related&&t.desc.related.map(function(t){a.lists.map(function(e){e.cards.map(function(e){e.id==t&&(e.color="blue-grey darken-2",e.hover=!0)})})})}else if("利害關係人"==e.name)t.color="#FBF0D3",t.hover=!1,this.lists.map(function(e){e.cards.map(function(e){void 0!=e.desc.peoplefrom&&e.desc.peoplefrom.map(function(a){a==t.id&&(e.color="#FBF0D3",e.hover=!1)}),void 0!=e.desc.peopleto&&e.desc.peopleto.map(function(a){a==t.id&&(e.color="#FBF0D3",e.hover=!1)})})});else if("佐證文件"==e.name)t.color="#FBF0D3",t.hover=!1,this.lists.map(function(e){e.cards.map(function(a){void 0!=a.desc.data&&a.desc.data.map(function(s){s==t.id&&(a.color=e.color,a.hover=!1)})})});else{if(t.color="#FBF0D3",t.hover=!1,void 0!=t.desc.peopleto){var rt=!0,it=!1,nt=void 0;try{for(var ot,ct=E()(t.desc.peopleto);!(rt=(ot=ct.next()).done);rt=!0){var dt=ot.value,lt=!0,ut=!1,vt=void 0;try{for(var mt,ft=E()(this.lists);!(lt=(mt=ft.next()).done);lt=!0){var pt=mt.value,ht=!0,bt=!1,gt=void 0;try{for(var xt,yt=E()(pt.cards);!(ht=(xt=yt.next()).done);ht=!0){var kt=xt.value;kt.id==dt&&(kt.color="#FBF0D3",kt.hover=!1)}}catch(t){bt=!0,gt=t}finally{try{!ht&&yt.return&&yt.return()}finally{if(bt)throw gt}}}}catch(t){ut=!0,vt=t}finally{try{!lt&&ft.return&&ft.return()}finally{if(ut)throw vt}}}}catch(t){it=!0,nt=t}finally{try{!rt&&ct.return&&ct.return()}finally{if(it)throw nt}}}if(void 0!=t.desc.peoplefrom){var wt=!0,_t=!1,Ct=void 0;try{for(var Ft,At=E()(t.desc.peoplefrom);!(wt=(Ft=At.next()).done);wt=!0){var Tt=Ft.value,Bt=!0,Rt=!1,Et=void 0;try{for(var jt,It=E()(this.lists);!(Bt=(jt=It.next()).done);Bt=!0){var St=jt.value,Pt=!0,Ot=!1,Lt=void 0;try{for(var Dt,Ut=E()(St.cards);!(Pt=(Dt=Ut.next()).done);Pt=!0){var Qt=Dt.value;Qt.id==Tt&&(Qt.color="#FBF0D3",Qt.hover=!1)}}catch(t){Ot=!0,Lt=t}finally{try{!Pt&&Ut.return&&Ut.return()}finally{if(Ot)throw Lt}}}}catch(t){Rt=!0,Et=t}finally{try{!Bt&&It.return&&It.return()}finally{if(Rt)throw Et}}}}catch(t){_t=!0,Ct=t}finally{try{!wt&&At.return&&At.return()}finally{if(_t)throw Ct}}}if(void 0!=t.desc.data){var Ht=!0,zt=!1,Xt=void 0;try{for(var Nt,Kt=E()(t.desc.data);!(Ht=(Nt=Kt.next()).done);Ht=!0){var Vt=Nt.value,Zt=!0,Wt=!1,Mt=void 0;try{for(var Yt,$t=E()(this.lists);!(Zt=(Yt=$t.next()).done);Zt=!0){var qt=Yt.value,Jt=!0,Gt=!1,te=void 0;try{for(var ee,ae=E()(qt.cards);!(Jt=(ee=ae.next()).done);Jt=!0){var se=ee.value;se.id==Vt&&(se.color="#FBF0D3",se.hover=!1)}}catch(t){Gt=!0,te=t}finally{try{!Jt&&ae.return&&ae.return()}finally{if(Gt)throw te}}}}catch(t){Wt=!0,Mt=t}finally{try{!Zt&&$t.return&&$t.return()}finally{if(Wt)throw Mt}}}}catch(t){zt=!0,Xt=t}finally{try{!Ht&&Kt.return&&Kt.return()}finally{if(zt)throw Xt}}}void 0!=t.desc.related&&t.desc.related.map(function(t){a.lists.map(function(e){e.cards.map(function(e){e.id==t&&(e.color="#FBF0D3",e.hover=!1)})})})}},getcards:function(){var t=this,e=this.$route.params.id;Trello.boards.get(e+"/cards",{fields:"all"},function(e){t.cards=e})},endrelationmode:function(){this.relationmode=!1,this.firstcard={},this.lists.map(function(t){t.cards.map(function(e){e.color=t.color,e.hover=!1})})},getattachments:function(){this.lists.map(function(t){t.cards.map(function(t){t.attachments=[],Trello.cards.get(t.id,{fields:"attachments",attachments:!0},function(e){0!=e.attachments.length&&e.attachments.map(function(e){var a={};a.name=e.name,a.url=e.url,t.attachments.push(a)})})})})},fileChanged:function(t){var e=new FormData;e.append("key","fb8dab318e1888679f571104d8b36ac7"),e.append("token",localStorage.trello_token),e.append("file",t),e.append("name",this.newattachment.title),this.filename=t.name,this.uploadfile=e},onFileChange:function(t){var e=t.target.files||t.dataTransfer.files;if(e.length){var a=new FormData;a.append("key","fb8dab318e1888679f571104d8b36ac7"),a.append("token",localStorage.trello_token),a.append("file",e[0]),a.append("name",this.card.title),this.filename=file.name,this.uploadfile=a}},upload:function(t){if(void 0==t.attachments){var e=new XMLHttpRequest;e.responseType="json",e.onreadystatechange=function(){4===e.readyState&&window.location.reload(!0)},e.open("POST","https://api.trello.com/1/cards/"+t.id+"/attachments/"),e.send(this.uploadfile)}else this.attachsnackbar=!0},new_member:function(){this.newmemberdialog=!0},deleteattachment:function(t){Trello.delete("cards/"+t.id+"/attachments/"+t.attachments.id,function(){window.location.reload(!0)})},editboardtitle:function(){var t=this;Trello.put("boards/"+this.board.id,{name:this.board.name},function(e){t.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"修改"}),t.boardtitledialog=!1,t.$store.dispatch("getboardinfo",t.$route.params.id)})},addattachment:function(t){var e=this,a=this;this.lists.map(function(s){"佐證文件"==s.name&&Trello.post("cards",{name:e.newattachment.title,idList:s.id,desc:b()(e.newattachment.desc)},function(e){if(""!=a.newattachment.desc.attachment&&void 0!=a.newattachment.desc.attachment)Trello.post("cards/"+e.id+"/attachments",{url:a.newattachment.desc.attachment,name:a.newattachment.title},function(){a.newattachment.title="",a.newattachment.desc.attachment="",a.getlists(a.board.id);t.desc.data.push(e.id),a.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"新增"})});else if(void 0==a.newattachment.attachments){var s=new XMLHttpRequest;s.responseType="json",s.onreadystatechange=function(){if(4===s.readyState){a.newattachment.title="",a.getlists(a.board.id);t.desc.data.push(e.id),a.$store.dispatch("getsnackbar",{state:!0,color:"success",text:"新增"})}},s.open("POST","https://api.trello.com/1/cards/"+e.id+"/attachments/"),s.send(a.uploadfile)}})})}}),created:function(){this.$store.dispatch("getlists",this.$route.params.id)},computed:i()({},Object(n.c)({user:"user"}),at({board:"board",openstakeholders:"openstakeholders",openevidences:"openevidences",boardtitledialog:"boardtitledialog",search:"search"}),st({card:"card",opencard:"opencard",selectedlist:"selectedlist",editable:"editable",titlestyle:"titlestyle",titlecolor:"titlecolor",relatedlist:"relatedlist",deleteCard:"deleteCard",deletedID:"deletedID",attachsnackbar:"attachsnackbar"}),rt({lists:"lists",stakeholders:"stakeholders",evidences:"evidences",stakeholderList:"stakeholderList",evidenceList:"evidenceList"}))},nt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-md":""}},[a("toolbar"),t._v(" "),a("v-layout",{attrs:{row:""}},t._l(t.lists,function(e){return a("v-flex",{directives:[{name:"show",rawName:"v-show",value:"利害關係人"!=e.name&&"佐證文件"!=e.name,expression:"list.name != '利害關係人' && list.name != '佐證文件'"}],key:e.id,attrs:{xs12:"",md4:"",lg3:""}},[a("v-card",{staticClass:"elevation-5 subheading font-weight-medium",style:t.titlestyle+e.color,attrs:{tile:""}},[a("v-card-title",[t._v("\n          "+t._s(e.name)+"\n        ")])],1),t._v(" "),a("v-card",{directives:[{name:"show",rawName:"v-show",value:"利害關係人"!=e.name&&"佐證文件"!=e.name,expression:"list.name != '利害關係人' && list.name != '佐證文件'"}],staticClass:"elevation-5",attrs:{tile:""}},[a("v-container",{staticClass:"pa-2",attrs:{fluid:"","grid-list-xs":"","align-center":""}},[a("draggable",{staticStyle:{"min-height":"1em"},attrs:{"ml-0":"",id:e.id,options:{group:"cards",animation:200}},on:{add:t.movecard}},t._l(t.searchcards(e),function(s){return a("v-card",{key:s.id,staticClass:"mb-2",staticStyle:{margin:"0",width:"100%","background-color":"#FBF0D3"},attrs:{dark:s.hover,color:s.color,hover:"",id:s.id},on:{mouseup:function(a){return t.editcard(s,e)},mouseover:function(a){t.hover=!0,t.changecolor(s,e)},mouseout:function(a){t.hover=!1,t.changecolor(s,e)}}},[a("v-card-title",{attrs:{"primary-title":""}},[a("div",{staticClass:"body-2"},[t._v(t._s(s.name))])])],1)}),1)],1),t._v(" "),t.board.admin.includes(t.user.id)||t.board.members.includes(t.user.id)?a("v-card",{attrs:{tile:"",color:"grey lighten-3"}},[a("v-btn",{staticStyle:{margin:"0",width:"100%"},attrs:{flat:"","text-md-left":""},nativeOn:{click:function(a){return a.stopPropagation(),t.newcard(e)}}},[a("v-icon",{attrs:{small:""}},[t._v("add")]),t._v("新增卡片"),a("v-spacer")],1)],1):t._e()],1)],1)}),1),t._v(" "),a("form-card"),t._v(" "),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.deleteCard,callback:function(e){t.deleteCard=e},expression:"deleteCard"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("確定刪除?")]),t._v(" "),a("v-card-text"),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"blue",flat:"flat"},nativeOn:{click:function(e){t.deleteCard=!1,t.closecard(t.deletedID)}}},[t._v("確定")]),t._v(" "),a("v-btn",{attrs:{color:"black",flat:"flat"},nativeOn:{click:function(e){t.deleteCard=!1}}},[t._v("取消")])],1)],1)],1),t._v(" "),a("snackbar"),t._v(" "),a("v-snackbar",{attrs:{timeout:5e3,top:"top"},model:{value:t.attachsnackbar,callback:function(e){t.attachsnackbar=e},expression:"attachsnackbar"}},[t._v("\n    請先刪除附件再重新上傳!\n    "),a("v-btn",{attrs:{flat:"",color:"pink"},nativeOn:{click:function(e){t.attachsnackbar=!1}}},[t._v("關閉")])],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"50vw"},model:{value:t.boardtitledialog,callback:function(e){t.boardtitledialog=e},expression:"boardtitledialog"}},[a("v-card",[a("v-card-text",[a("v-form",[a("v-container",[a("v-layout",[a("v-flex",[a("v-text-field",{attrs:{color:"grey darken-4"},model:{value:t.board.name,callback:function(e){t.$set(t.board,"name",e)},expression:"board.name"}})],1)],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"subheading",attrs:{flat:""},on:{click:function(e){t.getboardinfo(),t.boardtitledialog=!1}}},[t._v("取消")]),t._v(" "),a("v-btn",{staticClass:"subheading",attrs:{flat:"",color:"cyan",type:"submit"},on:{click:function(e){return t.editboardtitle()}}},[t._v("確認")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"50vw"},model:{value:t.openstakeholders,callback:function(e){t.openstakeholders=e},expression:"openstakeholders"}},[a("v-card",[a("v-card-title",[a("h2",{staticStyle:{"border-bottom":"0.5vh solid #21B5C2"}},[t._v("利害關係人")])]),t._v(" "),a("v-card-text",[a("p",[t._v("請選點利害關係人即可開始編輯該人物之相關資訊")]),t._v(" "),t._l(t.stakeholders,function(e){return a("v-btn",{key:e.id,staticClass:"elevation-5",attrs:{outline:""},nativeOn:{click:function(a){return t.editcard(e,t.stakeholderList)}}},[t._v(t._s(e.name))])}),t._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},nativeOn:{click:function(e){return t.newcard(t.stakeholderList)}}},[t._v("+新增利害關係人")])],2),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"subheading",attrs:{flat:""},on:{click:function(e){t.openstakeholders=!1}}},[t._v("關閉")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"50vw"},model:{value:t.openevidences,callback:function(e){t.openevidences=e},expression:"openevidences"}},[a("v-card",[a("v-card-title",[a("h2",{staticStyle:{"border-bottom":"0.5vh solid #21B5C2"}},[t._v("佐證文件")])]),t._v(" "),a("v-card-text",[a("p",[t._v("請選點Ｖ即可開始編輯該文件之相關資訊")]),t._v(" "),t._l(t.evidences,function(e){return a("v-btn",{key:e.id,staticClass:"elevation-5",attrs:{outline:""},nativeOn:{click:function(a){return t.editcard(e,t.evidenceList)}}},[t._v(t._s(e.name))])}),t._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},nativeOn:{click:function(e){return t.newcard(t.evidenceList)}}},[t._v("+新增佐證文件")])],2),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"subheading",attrs:{flat:""},on:{click:function(e){t.openevidences=!1}}},[t._v("關閉")])],1)],1)],1)],1)},staticRenderFns:[]};var ot=a("VU/8")(it,nt,!1,function(t){a("gsiG")},null,null).exports,ct=a("fZjL"),dt=a.n(ct),lt=Object(o.a)({getterType:"getBoardField",mutationType:"updateBoardField"}).mapFields,ut=Object(o.a)({getterType:"getCardField",mutationType:"updateCardField"}).mapFields,vt=Object(o.a)({getterType:"getListField",mutationType:"updateListField"}).mapFields,mt={components:{"form-card":H,"upload-btn":P.a},data:function(){return{arrows:0,arrowconfig:[],labeltextconfig:[],dialog:!1,valid:!1,selectedlist:{},peoplelist:[],datalist:[],snackbar:!1,textbox:{text:"",width:"180px",height:"130px",show:!1},editdialog:!1,titleRules:[function(t){return!!t||"此欄位為必填!"},function(t){return t.length<=30||"此欄位不可超過30個字!"}],pressshift:!1,firstcard:{},newcard:{typeid:"",type:"",title:"",desc:{explain:"",responsetime:"nowadays",department:"",background:"",role:"",stakeholders:[],evidences:[],related:[],attachment:"",x:0,y:0}},responsestring:"",isexplain:!1,noteicon:!1,linkicon:!1,unlinkicon:!1,tab:"tab-1",newpersonmode:!1,newattachmentmode:!1,attachmentselection:"attachmentlink",newattachment:{title:"",desc:{explain:"",responsetime:"nowadays",department:"",background:"",role:"",stakeholders:[],evidences:[],related:[],attachment:"",x:0,y:0}},filename:"",newperson:{title:"",desc:{explain:"",responsetime:"nowadays",department:"",background:"",role:"",stakeholders:[],evidences:[],related:[],attachment:"",x:0,y:0}}}},created:function(){this.$store.dispatch("getlists",this.$route.params.id),this.getboard()},mounted:function(){var t=this,e=this.$refs.stage.getStage();setTimeout(function(){t.getarrows(),e.find(".rectgroup").each(function(t){t.setZIndex(5),e.draw()})},1e3),window.addEventListener("wheel",function(e){var a=t.$refs.stage.getStage();e.preventDefault();var s=a.scaleX(),r=a.getPointerPosition().x/s-a.x()/s,i=a.getPointerPosition().y/s-a.y()/s,n=e.deltaY<0?1.1*s:s/1.1;a.scale({x:n,y:n});var o={x:-(r-a.getPointerPosition().x/n)*n,y:-(i-a.getPointerPosition().y/n)*n};a.position(o),a.batchDraw()}),window.addEventListener("keydown",function(e){16==event.keyCode&&(t.pressshift=!0)}),window.addEventListener("keyup",function(e){16==event.keyCode&&(t.pressshift=!1)})},destroyed:function(){window.removeEventListener("wheel",function(t){t.preventDefault();var e=stage.scaleX(),a=stage.getPointerPosition().x/e-stage.x()/e,s=stage.getPointerPosition().y/e-stage.y()/e,r=t.deltaY>0?e*scaleBy:e/scaleBy;stage.scale({x:r,y:r});var i={x:-(a-stage.getPointerPosition().x/r)*r,y:-(s-stage.getPointerPosition().y/r)*r};stage.position(i),stage.batchDraw()})},methods:{getarrows:function(){var t=this;this.arrows=0,t.lists.map(function(e){e.cards.map(function(e){void 0!=e.desc.related&&0!=e.desc.related.length&&e.desc.related.map(function(a){t.arrows++,t.getarrowconfig(e.id,a)})})})},getstageconfig:function(){return{width:window.innerWidth,height:window.innerHeight-64,draggable:!0}},getgroupconfig:function(t){return{x:t.desc.x,y:t.desc.y,draggable:!0,name:"rectgroup"}},getrectconfig:function(t){console.log(t.desc.stakeholders);var e=0;return e<2&&(e=2),{fill:"#FBF0D3",width:160,height:130+20*(e-2),shadowColor:"black",shadowOffset:{x:5,y:5},shadowOpacity:.5}},gettextconfig:function(t){return{x:0,y:15,text:t.name,fontSize:18,width:160,padding:15,fontFamily:"Roboto, 'Noto Sans TC'",lineHeight:1.5}},getcategoryconfig:function(t){return{x:0,y:10,fill:t.categorycolor,width:70,height:20,lineJoin:"round"}},getcategorytextconfig:function(t){return{x:5,y:8,width:70,text:t.name,fontSize:12,fontFamily:"Roboto, 'Noto Sans TC'",padding:5}},gettagconfig:function(t,e,a,s){t.length;var r=0,i=0,n=0;return void 0!=s?((r=s.length)+e>1&&(i=(r+e)/2),n=(r+e)%2):n=(r+e)%2,{x:20+75*n,y:100+30*i,width:60,height:20,fill:a,pointerDirection:"left",pointerWidth:10,pointerHeight:20,lineJoin:"round"}},gettagtextconfig:function(t,e,a){var s=t.length,r=0,i=0,n=0;return void 0!=a?((r=a.length)+e>1&&(i=(r+e)/2),n=(r+e)%2):n=(r+e)%2,{x:25+75*n,y:103+30*i,width:15*s,text:t,fontSize:12,fontFamily:"Roboto, 'Noto Sans TC'"}},getarrowconfig:function(t,e){var a=this.$refs[t][0].getStage(),s=this.$refs[e][0].getStage(),r=a.getX()+a.children[0].getWidth()/2,i=a.getY()+a.children[0].getHeight(),n=s.getX()+s.children[0].getWidth()/2,o=s.getY();this.arrowconfig[this.arrows]={name:t+","+e,fill:"black",points:[r,i,n,o],stroke:"black",strokeWidth:4,shadowColor:"black",shadowOffset:{x:1,y:1},shadowOpacity:.5}},adjustPoint:function(t){var e=this.$refs[t][0].getStage();this.$refs.arrow.map(function(a){var s=a.getStage().getName().split(",");if(t==s[0]){var r=[e.getX()+e.children[0].getWidth()/2,e.getY()+e.children[0].getHeight(),a.getStage().getPoints()[2],a.getStage().getPoints()[3]];a.getStage().setPoints(r)}else if(t==s[1]){var i=[a.getStage().getPoints()[0],a.getStage().getPoints()[1],e.getX()+e.children[0].getWidth()/2,e.getY()];a.getStage().setPoints(i)}})},changeposition:function(t,e){t.desc.x=this.$refs[t.id][0].getStage().getX(),t.desc.y=this.$refs[t.id][0].getStage().getY(),Trello.put("cards/"+t.id,{idList:e.id,desc:b()(t.desc)},function(){})},viewattachment:function(t){window.open(t.url)},changecursor:function(t){},linkcard:function(t){var e=this;if(this.pressshift)if(0==dt()(this.firstcard).length)this.firstcard=t,this.$refs[t.id][0].getStage().children[0].fill("black"),this.$refs[t.id][0].getStage().children[1].fill("white"),this.$refs.stage.getStage().draw();else if(1==this.firstcard.column)if(this.firstcard.column==t.column||this.firstcard.column+1==t.column)if(this.firstcard.desc.related.includes(t.id)||this.firstcard.id===t.id){var a=this.firstcard.desc.related.indexOf(t.id);-1!==a&&this.firstcard.desc.related.splice(a,1),Trello.put("cards/"+this.firstcard.id,{desc:b()(this.firstcard.desc)},function(){e.firstcard={},e.getcards(),e.editdialog=!1,setTimeout(function(){e.getarrows()},1e3)})}else this.firstcard.desc.related.push(t.id),Trello.put("cards/"+this.firstcard.id,{desc:b()(this.firstcard.desc)},function(){e.firstcard={},e.getcards(),e.editdialog=!1,setTimeout(function(){e.getarrows()},1e3)});else this.firstcard={},this.getcards();else if(this.firstcard.column+1==t.column)if(this.firstcard.desc.related.includes(t.id)||this.firstcard.id===t.id){var s=this.firstcard.desc.related.indexOf(t.id);-1!==s&&this.firstcard.desc.related.splice(s,1),Trello.put("cards/"+this.firstcard.id,{desc:b()(this.firstcard.desc)},function(){e.firstcard={},e.getcards(),e.editdialog=!1,setTimeout(function(){e.getarrows()},1e3)})}else this.firstcard.desc.related.push(t.id),Trello.put("cards/"+this.firstcard.id,{desc:b()(this.firstcard.desc)},function(){e.firstcard={},e.getcards(),e.editdialog=!1,setTimeout(function(){e.getarrows()},1e3)});else this.firstcard={},this.getcards()},edittext:function(t,e,a){this.dialog=!0,this.newcard.type=e.name,this.newcard.typeid=e.id,this.card.id=t.id,this.card.title=t.name,this.card.desc.responsetime=t.desc.responsetime,this.card.desc.stakeholders=t.desc.stakeholders,this.card.desc.evidences=t.desc.evidences,this.card.desc.related=t.desc.related,this.card.desc.explain=t.desc.explain,this.card.desc.role=t.desc.role,this.card.desc.department=t.desc.department,this.card.desc.background=t.desc.background,this.card.desc.attachment=t.desc.attachment,this.card.desc.x=t.desc.x,this.card.desc.y=t.desc.y,this.card.attachments=t.attachments},edittextsubmit:function(){var t=this;Trello.put("cards/"+this.card.id,{name:this.card.title},function(e){t.getcards(),t.editdialog=!1,setTimeout(function(){t.getarrows()},1e3)})},changetype:function(){var t=this;this.lists.map(function(e){e.id==t.newcard.typeid&&(t.newcard.type=e.name,t.resetForm(),"政府回應"==t.newcard.type&&("nowadays"==t.newcard.desc.responsetime?t.newcard.title="[現在]":t.newcard.title="[未來]"))})},getboard:function(){var t=this;this.board.id=this.$route.params.id,Trello.boards.get(this.board.id,{fields:"all"},function(e){t.board.name=e.name,""!=e.desc&&(t.board.desc=JSON.parse(e.desc)),t.board.admin=[],t.board.members=[],e.memberships.map(function(e){"admin"==e.memberType?t.board.admin.push(e.idMember):t.board.members.push(e.idMember)})})},resetForm:function(){this.newcard.title="",this.newcard.desc.explain="",this.newcard.desc.department="",this.newcard.desc.background="",this.newcard.desc.role="",this.newcard.desc.evidences=[]},changeresponsetime:function(t){t.title=t.title.replace("[現在]","").replace("[未來]",""),"nowadays"==t.desc.responsetime?this.responsestring="[現在]":this.responsestring="[未來]",t.title=this.responsestring+t.title},getexplainrectconfig:function(t){return{fill:"grey",width:180,height:130,shadowColor:"black",shadowOffset:{x:5,y:5},shadowOpacity:.5}},getexplainconfig:function(t){return{text:t.desc.explain,fill:"pink",fontSize:18,width:180,padding:15,fontFamily:"Roboto, 'Noto Sans TC'",lineHeight:1.5,draggable:!0}},showexplain:function(t,e){t.showexplain=e},changeiconcolor:function(t){t="black"==t?"blue":"black"},submit:function(){var t=this;this.newcard.desc.x=600,this.newcard.desc.y=400,Trello.post("cards",{name:this.newcard.title,idList:this.newcard.typeid,desc:b()(this.newcard.desc)},function(e){t.dialog=!1,t.getcards()})},bindtitlestyle:function(t){return"問題面向"==t?this.titlecolor="#FFCD13":"問題細節"==t?this.titlecolor="#FFE276":"現有解法"==t?this.titlecolor="#91AD70":"政府回應"==t?this.titlecolor="#F08B8B":"困難"==t?this.titlecolor="#C85938":"利害關係人"==t?this.titlecolor="#21B5C2":"佐證文件"==t&&(this.titlecolor="#D8CAC4"),this.titlestyle+this.titlecolor},fileChanged:function(t){var e=new FormData;e.append("key","fb8dab318e1888679f571104d8b36ac7"),e.append("token",localStorage.trello_token),e.append("file",t),e.append("name",this.newattachment.title),this.filename=t.name,this.uploadfile=e}},computed:i()({},Object(n.c)({user:"user"}),lt({board:"board"}),ut({card:"card",opencard:"opencard",selectedlist:"selectedlist",editable:"editable",titlestyle:"titlestyle",titlecolor:"titlecolor",relatedlist:"relatedlist"}),vt({lists:"lists"}))},ft={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs9:""}},[a("v-card",{staticClass:"mt-2",attrs:{flat:""}},[a("v-card-text",[a("div",{staticClass:"headline"},[t._v("# "+t._s(t.board.name)+" \r\n            ")])])],1)],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md6:""}},[a("v-tabs",{attrs:{left:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"indigo"}}),t._v(" "),a("v-tab",{staticStyle:{"font-size":"1.2rem"},attrs:{href:"#tab-2",to:{name:"board",params:{id:t.board.id}}}},[t._v("\r\n            議題分析表\r\n          ")]),t._v(" "),a("v-tab",{staticStyle:{"font-size":"1.2rem"},attrs:{href:"#tab-1"}},[t._v("\r\n            心智圖\r\n          ")])],1)],1)],1)],1),t._v(" "),a("div",{attrs:{id:"mindmap"}},[a("v-card",{staticClass:"ml-4",staticStyle:{position:"absolute","z-index":"200","margin-top":"8em"}},[a("v-list",[a("v-list-tile",[0==t.noteicon?a("v-icon",{attrs:{color:"black"},on:{click:function(e){t.opencard=!0,t.noteicon=!0}}},[t._v("note")]):t._e(),t._v(" "),1==t.noteicon?a("v-icon",{attrs:{color:"blue"},on:{click:function(e){t.opencard=!0,t.noteicon=!1}}},[t._v("note")]):t._e()],1),t._v(" "),a("v-list-tile",[0==t.linkicon?a("v-icon",{attrs:{color:"black"},on:{click:function(e){t.pressshift=!0,t.linkicon=!0,t.unlinkicon=!1}}},[t._v("fa-link")]):t._e(),t._v(" "),1==t.linkicon?a("v-icon",{attrs:{color:"blue"},on:{click:function(e){t.pressshift=!1,t.linkicon=!1}}},[t._v("fa-link")]):t._e()],1),t._v(" "),a("v-list-tile",[0==t.unlinkicon?a("v-icon",{attrs:{color:"black"},on:{click:function(e){t.pressshift=!0,t.unlinkicon=!0,t.linkicon=!1}}},[t._v("fa-unlink")]):t._e(),t._v(" "),1==t.unlinkicon?a("v-icon",{attrs:{color:"blue"},on:{click:function(e){t.pressshift=!1,t.unlinkicon=!1}}},[t._v("fa-unlink")]):t._e()],1)],1)],1),t._v(" "),a("v-btn",{staticStyle:{bottom:"1em"},attrs:{absolute:"",dark:"",fab:"",bottom:"",left:"",color:"blue",to:{name:"board",params:{id:t.board.id}}}},[a("v-icon",{attrs:{medium:""}},[t._v("arrow_back")])],1),t._v(" "),a("v-stage",{ref:"stage",attrs:{id:"stage",config:t.getstageconfig()}},[a("v-layer",{ref:"layer"},[t._l(t.lists,function(e){return a("v-group",{key:e.id},t._l(e.cards,function(s,r){return a("v-group",{key:s.id,ref:s.id,refInFor:!0,attrs:{config:t.getgroupconfig(s)},on:{click:function(e){return t.linkcard(s)},dragmove:function(e){return t.adjustPoint(s.id)},dragend:function(a){return t.changeposition(s,e)}}},[a("v-rect",{attrs:{config:t.getrectconfig(s)}}),t._v(" "),a("v-text",{ref:"text"+s.id,refInFor:!0,attrs:{config:t.gettextconfig(s)},on:{dblclick:function(a){return t.edittext(s,e,r)}}}),t._v(" "),a("v-group",[a("v-tag",{attrs:{config:t.getcategoryconfig(s)}}),t._v(" "),a("v-text",{attrs:{config:t.getcategorytextconfig(e)}})],1),t._v(" "),s.showexplain&&""!==s.desc.explain?a("v-group",[a("v-rect",{attrs:{config:t.getexplainrectconfig(s)}}),t._v(" "),a("v-text",{attrs:{config:t.getexplainconfig(s)}})],1):t._e(),t._v(" "),t._l(s.tagsfrom,function(e,s){return a("v-group",{key:e},[a("v-tag",{attrs:{config:t.gettagconfig(e,s,"#ABEBC6")}}),t._v(" "),a("v-text",{attrs:{config:t.gettagtextconfig(e,s)}})],1)}),t._v(" "),t._l(s.tagsto,function(e,s){return a("v-group",{key:e},[a("v-tag",{attrs:{config:t.gettagconfig(e,s,"#D2B4DE")}}),t._v(" "),a("v-text",{attrs:{config:t.gettagtextconfig(e,s)}})],1)}),t._v(" "),t._l(s.attachments,function(e,r){return a("v-group",{key:e.name,on:{mouseup:function(a){return t.viewattachment(e)},mouseover:function(e){return t.changecursor(!0)},mouseout:function(e){return t.changecursor(!1)}}},[a("v-tag",{attrs:{config:t.gettagconfig(e.name,r,"#CFD8DC",s.tags)}}),t._v(" "),a("v-text",{attrs:{config:t.gettagtextconfig(e.name,r,s.tags)}})],1)})],2)}),1)}),t._v(" "),t._l(t.arrows,function(e){return a("v-arrow",{key:e,ref:"arrow",refInFor:!0,attrs:{config:t.arrowconfig[e]}})})],2)],1),t._v(" "),a("form-card")],1)],1)},staticRenderFns:[]};a("VU/8")(mt,ft,!1,function(t){a("Sf9f")},"data-v-5b5f152b",null).exports;var pt=Object(o.a)({getterType:"getBoardField",mutationType:"updateBoardField"}).mapFields,ht=Object(o.a)({getterType:"getCardField",mutationType:"updateCardField"}).mapFields,bt=Object(o.a)({getterType:"getListField",mutationType:"updateListField"}).mapFields,gt={data:function(){return{headers:[{text:"問題面向",value:"name"},{text:"問題細節",value:"name"},{text:"現有解法",value:"name"},{text:"政府回應",value:"name"},{text:"困難",value:"name"}]}},methods:{},created:function(){this.$store.dispatch("getlists",this.$route.params.id)},computed:i()({},Object(n.c)({user:"user"}),pt({board:"board"}),ht({card:"card",opencard:"opencard",selectedlist:"selectedlist",editable:"editable",titlestyle:"titlestyle",titlecolor:"titlecolor",relatedlist:"relatedlist"}),bt({lists:"lists",stakeholders:"stakeholders",evidences:"evidences"}))},xt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.lists[0].cards},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.name))]),t._v(" "),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.name))]),t._v(" "),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.name))]),t._v(" "),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.name))]),t._v(" "),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.name))])]}}])})]],2)],1)],1)},staticRenderFns:[]};var yt=a("VU/8")(gt,xt,!1,function(t){a("0HRO")},null,null).exports,kt=Object(o.a)({getterType:"getBoardField",mutationType:"updateBoardField"}).mapFields,wt=Object(o.a)({getterType:"getCardField",mutationType:"updateCardField"}).mapFields,_t=Object(o.a)({getterType:"getListField",mutationType:"updateListField"}).mapFields,Ct={components:{"form-card":H,"upload-btn":P.a,toolbar:et},data:function(){return{canvas:new fabric.Canvas("canvas")}},methods:{getcards:function(){var t=K()(X.a.mark(function t(){var e,a,s=this;return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.lists=[],e=this.$route.params.id,t.next=4,Trello.boards.get(e+"/lists",{cards:"open"});case 4:return a=t.sent,t.t0=a,t.next=8,function(t){if("利害關係人"!=t.name&&"佐證文件"!=t.name&&"專有名詞字典"!=t.name){var e={};switch(e.id=t.id,e.name=t.name,e.cards=t.cards,e.name){case"問題面向":e.color="#FFCD13",e.column=1;break;case"問題細節":e.color="#FFE276",e.column=2;break;case"現有解法":e.color="#91AD70",e.column=3;break;case"政府回應":e.color="#F08B8B",e.column=4;break;case"困難":e.color="#C85938",e.column=5;break;case"利害關係人":e.color="#0097A7",e.column=6;break;case"佐證文件":e.color="#CFD8DC",e.column=7;break;default:e.color="teal"}e.cards.map((a=K()(X.a.mark(function t(a){var r;return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=JSON.parse(a.desc),a.desc=r,a.color=e.color,a.column=e.column,a.showexplain=!1,a.hover=!1,a.attachments=[];case 7:case"end":return t.stop()}},t,s)})),function(t){return a.apply(this,arguments)})),s.lists.push(e)}var a};case 8:t.t1=t.sent,t.t0.map.call(t.t0,t.t1);case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),draw:function(){var t=this,e=155,a=155,s=15,r=15;function i(t,e,a,s){var r,i;return i=s-e,180*(0===(r=a-t)?0===i?0:i>0?Math.PI/2:3*Math.PI/2:0===i?r>0?0:Math.PI:r<0?Math.atan(i/r)+Math.PI:i<0?Math.atan(i/r)+2*Math.PI:Math.atan(i/r))/Math.PI+90}function n(o,c){t.canvas.off("object:selected",n);var d=o,l=c,u=d.getCenterPoint(),v=l.getCenterPoint(),m=u.x,f=u.y,p=v.x,h=v.y,b=e/2+s/2,g=a/2+r/2;(m<p?p-m:m-p)>(f<h?h-f:f-h)?m<p?p-=b:p+=b:f<h?h-=g:h+=g;var x=new fabric.Line([m,f,p,h],{fill:"black",stroke:"black",strokeWidth:3,selectable:!1,fromObject:d,toObject:l});x.triangle=new fabric.Triangle({left:x.x2,top:x.y2,angle:i(x.x1,x.y1,x.x2,x.y2),originX:"center",originY:"center",hasBorders:!1,hasControls:!1,lockScalingX:!0,lockScalingY:!0,lockRotation:!0,pointType:"arrow_start",width:s,height:r,fill:"black",selectable:!1}),t.canvas.add(x,x.triangle),x.sendToBack(),d.addChild=d.addChild||{},d.addChild.lines=d.addChild.lines||[],d.addChild.lines.push(x),l.addChild=l.addChild||{},l.addChild.lines=l.addChild.lines||[],l.addChild.lines.push(x),x.addChildRemove=function(){d.addChild.lines.forEach(function(t,e,a){t===x&&a.splice(e,1)})},t.canvas.addChild=void 0}this.canvas.dispose(),this.canvas=new fabric.Canvas("canvas"),this.canvas.setHeight(window.innerHeight),this.canvas.setWidth(window.innerWidth),this.lists.map(function(e){"利害關係人"!=e.name&&"佐證文件"!=e.name&&"專有名詞字典"!=e.name&&e.cards.map(function(a){var s=0,r="",i=[],n=(a.desc.stakeholders.length+a.desc.evidences.length)/2*20+170,o=new fabric.Rect({width:155,height:n,fill:"white",stroke:"rgba(0,0,0,0.6)",strokeWidth:.25,originX:"center",originY:"center"});o.setShadow({color:"rgba(0,0,0,0.6)",blur:20,offsetX:5,offsetY:5,opacity:.1,fillShadow:!0,strokeShadow:!0});for(var c=1;c<a.name.length+1;c++)c%8==0?(r+=a.name.substring(s,c)+" ",s=c):c==a.name.length&&(r+=a.name.substring(s,c));var d=new fabric.Textbox(r,{textAlign:"justify-left",fill:"rgba(0,0,0,100)",fontSize:16,originX:.5,originY:.4,fontFamily:"Roboto, 'Noto Sans TC'",fixedWidth:155}),l=new fabric.Textbox(e.name,{textAlign:"left",fontSize:18,left:-65,top:-75-(a.desc.stakeholders.length+a.desc.evidences.length)/2*10,fontFamily:"Roboto, 'Noto Sans TC'",fixedWidth:100,maxLines:2}),u=new fabric.Rect({width:155,height:5,fill:a.categorycolor,left:-79,top:-45-(a.desc.stakeholders.length+a.desc.evidences.length)/2*10});i.push(o),i.push(d),i.push(l),i.push(u);var v=1,m=0,f=0;a.desc.stakeholders.map(function(t){v%2==0?m=80:(m=0,f++);var e=new fabric.Textbox(t.name,{textAlign:"left",fontSize:14,left:-65+m,top:45+20*f,backgroundColor:"#D2B4DE",fontFamily:"Roboto, 'Noto Sans TC'"});i.push(e),v++}),a.desc.evidences.map(function(t){v%2==0?m=80:(m=0,f++);var e=new fabric.Textbox(t.name,{textAlign:"left",fontSize:14,left:-65+m,top:45+20*f,backgroundColor:"#CFD8DC",fontFamily:"Roboto, 'Noto Sans TC'"});i.push(e),v++});var p=new fabric.Group(i,{id:a.id,name:a.name,left:a.desc.x,top:a.desc.y,hasControls:!1,hasRotatingPoint:!1,borderColor:"gray",card:a});p.on("moved",function(t){a.desc.x=t.target.left,a.desc.y=t.target.top,Trello.put("cards/"+a.id,{idList:e.id,desc:b()(a.desc)},function(){})}),p.on("mousedblclick",function(e){t.editcard(a)}),t.canvas.add(p)})}),fabric.Canvas.prototype.getItemByName=function(t){for(var e=null,a=this.getObjects(),s=0,r=this.size();s<r;s++)if(a[s].name&&a[s].name===t){e=a[s];break}return e},this.lists.map(function(a){"利害關係人"!=a.name&&"佐證文件"!=a.name&&"專有名詞字典"!=a.name&&a.cards.map(function(a){var s=t.canvas.getItemByName(a.name);0!=a.desc.related.length&&a.desc.related.map(function(e){var a=t.canvas.getItemByName(e.name);n(s,a)}),function(a){var s=a.getCenterPoint();fabric.Image.fromURL("http://www.pngmart.com/files/8/Plus-Transparent-Images-PNG.png",function(r){var i=r.set({name:"button",left:s.x+e/2.3,top:s.y,width:1e3,height:1e3,fromObject:a,hoverCursor:"pointer"});i.scaleToHeight(30),i.scaleToWidth(30),i.selectable=!1,i.on("mousedown",function(e){t.newcard(a.card)}),t.canvas.add(i),a.addChild=a.addChild||{},a.addChild.button=a.addChild.button||[],a.addChild.button.push(i)})}(s)})});["object:moving"].forEach(function(n){t.canvas.on(n,function(n){for(var o=n.target,c=0;c<o._objects.length;c++)o._objects[c].addChild&&o._objects[c].addChild.lines?o._objects[c].addChild.lines.forEach(function(t){void 0!=t.fromObject.group&&void 0!=t.toObject.group?t.fromObject.group._objects.map(function(n){t.toObject.group._objects.map(function(o){if(t.fromObject.id==n.id&&t.toObject.id==o.id){var c=t.fromObject.group.getCenterPoint(),d=c.x+n.getCenterPoint().x,l=c.y+n.getCenterPoint().y,u=t.toObject.group.getCenterPoint(),v=u.x+o.getCenterPoint().x,m=u.y+o.getCenterPoint().y,f=e/2+s/2,p=a/2+r/2,h=Math.abs(v-t.x1)>Math.abs(m-t.y1);t.set({x1:d,y1:l,x2:v+f*(h?v<t.x1?1:-1:0),y2:m+p*(h?0:m<t.y1?1:-1)}),t.triangle.set({left:t.x2,top:t.y2,angle:i(t.x1,t.y1,t.x2,t.y2)})}})}):void 0==t.fromObject.group?t.toObject.group._objects.map(function(n){if(t.toObject.id==n.id){var o=t.fromObject.getCenterPoint(),c=o.x,d=o.y,l=t.toObject.group.getCenterPoint(),u=l.x+n.getCenterPoint().x,v=l.y+n.getCenterPoint().y,m=e/2+s/2,f=a/2+r/2,p=Math.abs(u-t.x1)>Math.abs(v-t.y1);t.set({x1:c,y1:d,x2:u+m*(p?u<t.x1?1:-1:0),y2:v+f*(p?0:v<t.y1?1:-1)}),t.triangle.set({left:t.x2,top:t.y2,angle:i(t.x1,t.y1,t.x2,t.y2)})}}):void 0==t.toObject.group&&t.fromObject.group._objects.map(function(n){if(t.fromObject.id==n.id){var o=t.fromObject.group.getCenterPoint(),c=o.x+n.getCenterPoint().x,d=o.y+n.getCenterPoint().y,l=t.toObject.getCenterPoint(),u=l.x,v=l.y,m=e/2+s/2,f=a/2+r/2,p=Math.abs(u-t.x1)>Math.abs(v-t.y1);t.set({x1:c,y1:d,x2:u+m*(p?u<t.x1?1:-1:0),y2:v+f*(p?0:v<t.y1?1:-1)}),t.triangle.set({left:t.x2,top:t.y2,angle:i(t.x1,t.y1,t.x2,t.y2)})}})}):o.addChild&&o.addChild.lines&&o.addChild.lines.forEach(function(t){var n=t.fromObject.getCenterPoint(),o=n.x,c=n.y,d=t.toObject.getCenterPoint(),l=d.x,u=d.y,v=e/2+s/2,m=a/2+r/2,f=Math.abs(l-t.x1)>Math.abs(u-t.y1);t.set({x1:o,y1:c,x2:l+v*(f?l<t.x1?1:-1:0),y2:u+m*(f?0:u<t.y1?1:-1)}),t.triangle.set({left:t.x2,top:t.y2,angle:i(t.x1,t.y1,t.x2,t.y2)})}),o._objects[c].addChild&&o._objects[c].addChild.button?o._objects[c].addChild.button.forEach(function(t){t.fromObject.group._objects.map(function(a){if(t.fromObject.id==a.id){var s=t.fromObject.group.getCenterPoint();t.set({left:s.x+a.getCenterPoint().x+e/2.3,top:s.y+a.getCenterPoint().y})}})}):o.addChild&&o.addChild.button&&o.addChild.button.forEach(function(t){var a=t.fromObject.getCenterPoint();t.set({left:a.x+e/2.3,top:a.y})});t.canvas.renderAll()})}),t.canvas.on("object:moved",function(t){for(var e=t.target,a=e.left+e.width/2,s=e.top+e.height/2,r=function(t){void 0!=e._objects[t].id&&Trello.get("cards/"+e._objects[t].id,function(r){var i=JSON.parse(r.desc);i.x=a+e._objects[t].left,i.y=s+e._objects[t].top,Trello.put("cards/"+e._objects[t].id,{desc:b()(i)},function(){})})},i=0;i<e._objects.length;i++)r(i)}),t.canvas.on("mouse:wheel",function(e){var a=e.e.deltaY,s=(t.canvas.getPointer(e.e),t.canvas.getZoom());(s-=a/2e3)>20&&(s=20),s<.01&&(s=.01),t.canvas.zoomToPoint({x:e.e.offsetX,y:e.e.offsetY},s),e.e.preventDefault(),e.e.stopPropagation()}),t.canvas.on("mouse:down:before",function(t){var e=t.e;0!=e.button&&(this.isDragging=!0,this.selection=!1,this.lastPosX=e.clientX,this.lastPosY=e.clientY)}),t.canvas.on("mouse:move",function(t){if(this.isDragging){var e=t.e;this.viewportTransform[4]+=e.clientX-this.lastPosX,this.viewportTransform[5]+=e.clientY-this.lastPosY,this.requestRenderAll(),this.lastPosX=e.clientX,this.lastPosY=e.clientY}}),t.canvas.on("mouse:up:before",function(t){this.isDragging=!1,this.selection=!0;for(var e=this.getObjects(),a=0;a<e.length;a++)e[a].setCoords()}),t.canvas.renderAll.bind(t.canvas)},newcard:function(t){var e=this;this.lists.map(function(a){"問題面向"==t.listname?"問題細節"==a.name&&(e.selectedlist=a):"問題細節"==t.listname?"現有解法"==a.name&&(e.selectedlist=a):"現有解法"==t.listname?"政府回應"==a.name&&(e.selectedlist=a):"政府回應"==t.listname&&"困難"==a.name&&(e.selectedlist=a)}),this.cardFrom=t,this.opencard=!0,this.editable=!1,"政府回應"==this.selectedlist.name&&("nowadays"==this.card.desc.responsetime?this.card.title="[現在]":this.card.title="[未來]"),this.getrelated(this.selectedlist)},getrelated:function(t){var e=this;this.relatedlist=[],this.lists.map(function(a){"問題面向"==t.name?"問題細節"==a.name&&a.cards.map(function(t){e.relatedlist.push({id:t.id,name:t.name,desc:t.desc})}):"問題細節"==t.name?"現有解法"==a.name&&a.cards.map(function(t){e.relatedlist.push({id:t.id,name:t.name,desc:t.desc})}):"現有解法"==t.name?"政府回應"==a.name&&a.cards.map(function(t){e.relatedlist.push({id:t.id,name:t.name,desc:t.desc})}):"政府回應"==t.name&&"困難"==a.name&&a.cards.map(function(t){e.relatedlist.push({id:t.id,name:t.name,desc:t.desc})})})},editcard:function(t){var e=this;this.lists.map(function(a){t.listname===a.name&&(e.selectedlist=a)}),this.opencard=!0,this.card.id=t.id,this.card.title=t.name,this.card.desc.responsetime=t.desc.responsetime,this.card.desc.data=t.desc.data,this.card.desc.related=t.desc.related,this.card.desc.explain=t.desc.explain,this.card.desc.role=t.desc.role,this.card.desc.department=t.desc.department,this.card.desc.background=t.desc.background,this.card.desc.stakeholders=t.desc.stakeholders,this.card.desc.evidences=t.desc.evidences,this.card.desc.attachment=t.desc.attachment,this.card.desc.x=t.desc.x,this.card.desc.y=t.desc.y,this.card.attachments=t.attachments,this.editable=!0,this.getrelated(this.selectedlist)}},created:function(){this.$store.dispatch("getlists",this.$route.params.id)},computed:i()({},Object(n.c)({user:"user"}),kt({board:"board"}),wt({card:"card",opencard:"opencard",selectedlist:"selectedlist",editable:"editable",titlestyle:"titlestyle",titlecolor:"titlecolor",relatedlist:"relatedlist",deleteCard:"deleteCard",deletedID:"deletedID",attachsnackbar:"attachsnackbar",cardFrom:"cardFrom"}),_t({lists:"lists",stakeholders:"stakeholders",evidences:"evidences",stakeholderList:"stakeholderList",evidenceList:"evidenceList"})),watch:{lists:function(){this.canvas.clear(),this.draw()}}},Ft={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{width:"100%",height:"100%"}},[e("v-container",{attrs:{"grid-list-md":""}},[e("toolbar")],1),this._v(" "),e("canvas",{attrs:{id:"canvas"}}),this._v(" "),e("form-card")],1)},staticRenderFns:[]};var At=a("VU/8")(Ct,Ft,!1,function(t){a("+zoX")},null,null).exports;s.default.use(p.a);var Tt=new p.a({routes:[{path:"/",name:"index",component:B},{path:"/board/:id",name:"board",component:ot},{path:"/mindmap/:id",name:"mindmap",component:At},{path:"/printout/:id",name:"printout",component:yt},{path:"/mindmap-v2/:id",name:"mindmapv2",component:At}]}),Bt=a("3EgV"),Rt=a.n(Bt),Et=(a("7zck"),a("rc1w")),jt=a.n(Et),It=a("kmDT"),St={state:{user:{id:"",name:"",avatar:""},members:[]},getters:{user:function(t){return t.user},members:function(t){return t.members}},actions:{login:function(t){t.commit;Trello.authorize({name:"PDIS議題分析表",expiration:"never",scope:{read:!0,write:!0}})},getuser:function(t){var e=t.commit,a=t.dispatch;Trello.members.get("me",function(t){e("getuser",t)},a("login"))},getmembers:function(t){var e=t.commit;Trello.organizations.get("pdisimi",{fields:"all"},function(t){e("getmembers",t)})}},mutations:{getuser:function(t,e){t.user.id=e.id,t.user.name=e.fullName,"none"!=e.avatarSource&&(t.user.avatar=e.avatarUrl+"/50.png")},getmembers:function(t,e){e.memberships.map(function(e){t.members.push(e.idMember)})}}},Pt=Object(o.a)({getterType:"getBoardField",mutationType:"updateBoardField"}),Ot={state:{boards:[],board:{id:"",name:"",desc:{title:"",person:"",date:null,department:"",codepartment:"",link:"",issuesource:"dep"},admin:[],members:[],avatars:[]},openboard:!1,selectedboardid:"",openstakeholders:!1,openevidences:!1,boardtitledialog:!1,search:""},getters:{getBoardField:Pt.getBoardField},actions:{getboardinfo:function(t,e){var a=t.commit;Trello.boards.get(e,{fields:"all"},function(t){a("getboardinfo",t)})},getboards:function(t){var e=t.commit;Trello.organizations.get("pdisimi/boards",{filter:"open"},function(t){e("getboards",t)})},editboard:function(t,e){(0,t.commit)("editboard",e)}},mutations:{getboardinfo:function(t,e){t.board.admin=[],t.board.members=[],t.board.avatars=[],t.board.id=e.id,t.board.name=e.name,t.board.desc=JSON.parse(e.desc),e.memberships.map(function(e){"admin"==e.memberType?(t.board.admin.push(e.idMember),Trello.get("/members/"+e.idMember,function(e){t.board.avatars.push(e.avatarUrl)})):(t.board.members.push(e.idMember),Trello.get("/members/"+e.idMember,function(e){t.board.avatars.push(e.avatarUrl)}))})},getboards:function(t,e){t.boards=[],e.map(function(e){var a={};a.id=e.id,a.title=e.name,a.desc=JSON.parse(e.desc),a.admin=[],e.memberships.map(function(t){"admin"==t.memberType&&a.admin.push(t.idMember)}),t.boards.push(a)})},editboard:function(t,e){t.openboard=!t.openboard,t.selectedboardid=e},updateBoardField:Pt.updateBoardField}},Lt=Object(o.a)({getterType:"getCardField",mutationType:"updateCardField"}),Dt={state:{card:{id:"",title:"",desc:{explain:"",responsetime:"nowadays",department:"",background:"",role:"",stakeholders:[],evidences:[],related:[],attachment:"",x:0,y:0}},opencard:!1,editable:!1,selectedlist:{},titlecolor:"",titlestyle:"border-bottom: 0.5vh solid ",relatedlist:[],deleteCard:!1,deletedID:"",attachsnackbar:!1,cardFrom:null},getters:{getCardField:Lt.getCardField},actions:{},mutations:{updateCardField:Lt.updateCardField}},Ut=Object(o.a)({getterType:"getListField",mutationType:"updateListField"}),Qt=Ut.getListField,Ht=Ut.updateListField,zt={lists:[],cards:[],stakeholders:[],evidences:[],stakeholderList:{id:"",name:"",color:"",cards:[],column:""},evidenceList:{id:"",name:"",color:"",cards:[],column:""}},Xt={getlists:function(t,e){var a=this,s=(t.commit,t.dispatch);return K()(X.a.mark(function t(){var r,i;return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],i=[],t.next=4,Trello.boards.get(e+"/lists",{cards:"open"});case 4:t.sent.map(function(){var t=K()(X.a.mark(function t(e){var s;return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("專有名詞字典"==e.name){t.next=33;break}(s={}).id=e.id,s.name=e.name,s.cards=e.cards,t.t0=s.name,t.next="問題面向"===t.t0?8:"問題細節"===t.t0?11:"現有解法"===t.t0?14:"政府回應"===t.t0?17:"困難"===t.t0?20:"利害關係人"===t.t0?23:"佐證文件"===t.t0?26:29;break;case 8:return s.color="#FFCD13",s.column=1,t.abrupt("break",31);case 11:return s.color="#FFE276",s.column=2,t.abrupt("break",31);case 14:return s.color="#91AD70",s.column=3,t.abrupt("break",31);case 17:return s.color="#F08B8B",s.column=4,t.abrupt("break",31);case 20:return s.color="#C85938",s.column=5,t.abrupt("break",31);case 23:return s.color="#0097A7",s.column=6,t.abrupt("break",31);case 26:return s.color="#CFD8DC",s.column=7,t.abrupt("break",31);case 29:return s.color="teal",t.abrupt("break",31);case 31:s.cards.map(function(){var t=K()(X.a.mark(function t(e){return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.desc=JSON.parse(e.desc),e.color="#FBF0D3",e.categorycolor=s.color,e.column=s.column,e.listname=s.name,e.hover=!1,i.push(e);case 7:case"end":return t.stop()}},t,a)}));return function(e){return t.apply(this,arguments)}}()),r.push(s);case 33:zt.cards=i,zt.lists=r;case 35:case"end":return t.stop()}},t,a)}));return function(e){return t.apply(this,arguments)}}()),s("getstakeholders"),s("getevidences");case 8:case"end":return t.stop()}},t,a)}))()},getstakeholders:function(t){t.commit;zt.stakeholders=[],zt.lists.map(function(t){"利害關係人"==t.name&&(zt.stakeholderList.id=t.id,zt.stakeholderList.name=t.name,zt.stakeholderList.cards=t.cards,zt.stakeholderList.color="#0097A7",zt.stakeholderList.column=6,t.cards.map(function(t){zt.stakeholders.push({id:t.id,name:t.name,desc:t.desc})}))})},getevidences:function(t){t.commit;zt.evidences=[],zt.lists.map(function(t){"佐證文件"==t.name&&(zt.evidenceList.id=t.id,zt.evidenceList.name=t.name,zt.evidenceList.cards=t.cards,zt.evidenceList.color="#CFD8DC",zt.evidenceList.column=7,t.cards.map(function(t){zt.evidences.push({id:t.id,name:t.name,desc:t.desc})}))})}},Nt={state:zt,getters:{getListField:Qt},actions:Xt,mutations:{updateListField:Ht}},Kt=Object(o.a)({getterType:"getDictionaryField",mutationType:"updateDictionaryField"}),Vt={state:{opendictionary:!1},getters:{getDictionaryField:Kt.getDictionaryField},actions:{},mutations:{updateDictionaryField:Kt.updateDictionaryField}},Zt={state:{snackbar:{state:!1,color:"",text:""}},getters:{snackbar:function(t){return t.snackbar}},actions:{getsnackbar:function(t,e){(0,t.commit)("getsnackbar",e)}},mutations:{getsnackbar:function(t,e){t.snackbar.state=e.state,t.snackbar.color=e.color,t.snackbar.text=e.text}}};s.default.use(n.a);var Wt=new n.a.Store({modules:{user:St,board:Ot,card:Dt,list:Nt,dictionary:Vt,snackbar:Zt},namespaced:!0}),Mt=a("OjAt"),Yt=a.n(Mt),$t=a("UpdR"),qt=a.n($t),Jt=a("4dCV"),Gt=a.n(Jt);s.default.use(Yt.a),s.default.use(n.a),s.default.use(It.a.plugin,Wt),s.default.use(jt.a),s.default.use(Rt.a),s.default.config.productionTip=!1,s.default.i18n.add("en",qt.a),s.default.i18n.add("zh-TW",Gt.a),s.default.i18n.set(navigator.language),new s.default({el:"#app",router:Tt,components:{App:f},template:"<App/>",store:Wt})},Sf9f:function(t,e){},UpdR:function(t,e){t.exports={IssueList:"List of Issues",Search:"Search",Enter:"Enter","Issue Mapping Instruction":"Issue Mapping Instruction","Name of Topic":"Name of Topic","New Topic":"New Topic","Original Name of Topic":"Name of Topic",Initiator:"Initiator","Kick-off Date":"Kick-off Date","Responsible Bodies":"Responsible Bodies","Mind Mapping":"Mind Mapping",Instruction:"Instruction",FAQ:"FAQ",Home:"Home"}},gsiG:function(t,e){},iBRy:function(t,e){},j9LM:function(t,e){},kwB8:function(t,e){},tZTL:function(t,e){},uDZ2:function(t,e){},ywch:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8e229afe899659bcda36.js.map